<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.26" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.178" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><link rel="icon" type="image/png" href="https://theme-plume.vuejs.press/favicon-32x32.png"><title>随手记 | Mayee</title><meta name="description" content="Mayee 的笔记"><link rel="preload" href="/assets/style-KnDcgoSQ.css" as="style"><link rel="stylesheet" href="/assets/style-KnDcgoSQ.css"><link rel="modulepreload" href="/assets/app-B_sKV6fk.js"><link rel="modulepreload" href="/assets/index.html-Dkk1WwL1.js"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-dd2ea341><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-99de49af></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-99de49af> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-dd2ea341 data-v-cbd59ece><div class="vp-navbar" vp-navbar data-v-cbd59ece data-v-00b38fa1><div class="wrapper" data-v-00b38fa1><div class="container" data-v-00b38fa1><div class="title" data-v-00b38fa1><div class="vp-navbar-title" data-v-00b38fa1 data-v-cd71b5f0><a class="vp-link link no-icon title" href="/" data-v-cd71b5f0><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-241acfce><!--]--><!--[--><img class="vp-image light logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-241acfce><!--]--><!--]--><!--]--><span data-v-cd71b5f0>Mayee</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-00b38fa1><div class="content-body" data-v-00b38fa1><!--[--><!--]--><div class="vp-navbar-search search" data-v-00b38fa1><div class="search-wrapper" data-v-86f05120><!----><div id="local-search" data-v-86f05120><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-86f05120><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-00b38fa1 data-v-56ee30cd><span id="main-nav-aria-label" class="visually-hidden" data-v-56ee30cd>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/" tabindex="0" data-v-56ee30cd data-v-e5935568><!--[--><!----><span data-v-e5935568>首页</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/" tabindex="0" data-v-56ee30cd data-v-e5935568><!--[--><!----><span data-v-e5935568>博客</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/article/categories/" tabindex="0" data-v-56ee30cd data-v-e5935568><!--[--><!----><span data-v-e5935568>分类</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/article/tags/" tabindex="0" data-v-56ee30cd data-v-e5935568><!--[--><!----><span data-v-e5935568>标签</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/article/archives/" tabindex="0" data-v-56ee30cd data-v-e5935568><!--[--><!----><span data-v-e5935568>归档</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group active" data-v-56ee30cd data-v-212729cc><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-212729cc><span class="text" data-v-212729cc><!----><!----><span data-v-212729cc>笔记</span><!----><span class="vpi-chevron-down text-icon" data-v-212729cc></span></span></button><div class="menu" data-v-212729cc><div class="vp-menu" data-v-212729cc data-v-f7ab74ab><div class="items" data-v-f7ab74ab><!--[--><!--[--><div class="vp-menu-link" data-v-f7ab74ab data-v-d3958394><a class="vp-link link active" href="/notes/10fywd94/" data-v-d3958394><!--[--><!----> 随手记 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f7ab74ab data-v-d3958394><a class="vp-link link" href="/notes/qr0e6712/" data-v-d3958394><!--[--><!----> Docker <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f7ab74ab data-v-d3958394><a class="vp-link link" href="/notes/q5w629t0/" data-v-d3958394><!--[--><!----> KMS <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f7ab74ab data-v-d3958394><a class="vp-link link" href="/notes/vej2ba8o/" data-v-d3958394><!--[--><!----> 开发环境 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f7ab74ab data-v-d3958394><a class="vp-link link" href="/command/" data-v-d3958394><!--[--><!----> 常用命令 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-f7ab74ab data-v-d3958394><a class="vp-link link" href="/interview/" data-v-d3958394><!--[--><!----> 面试指南 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-00b38fa1 data-v-9942ed5a><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-9942ed5a data-v-9be4d56f data-v-ed16d483><span class="check" data-v-ed16d483><span class="icon" data-v-ed16d483><!--[--><span class="vpi-sun sun" data-v-9be4d56f></span><span class="vpi-moon moon" data-v-9be4d56f></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-00b38fa1 data-v-b1d2f84c data-v-c9db0fe8><!--[--><a class="vp-social-link no-icon" href="https://github.com/mayeona" aria-label="github" target="_blank" rel="noopener" data-v-c9db0fe8 data-v-bdde1d39><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-00b38fa1 data-v-155bedae data-v-212729cc><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-212729cc><span class="vpi-more-horizontal icon" data-v-212729cc></span></button><div class="menu" data-v-212729cc><div class="vp-menu" data-v-212729cc data-v-f7ab74ab><!----><!--[--><!--[--><!----><div class="group" data-v-155bedae><div class="item appearance" data-v-155bedae><p class="label" data-v-155bedae>外观</p><div class="appearance-action" data-v-155bedae><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-155bedae data-v-9be4d56f data-v-ed16d483><span class="check" data-v-ed16d483><span class="icon" data-v-ed16d483><!--[--><span class="vpi-sun sun" data-v-9be4d56f></span><span class="vpi-moon moon" data-v-9be4d56f></span><!--]--></span></span></button></div></div></div><div class="group" data-v-155bedae><div class="item social-links" data-v-155bedae><div class="vp-social-links social-links-list" data-v-155bedae data-v-c9db0fe8><!--[--><a class="vp-social-link no-icon" href="https://github.com/mayeona" aria-label="github" target="_blank" rel="noopener" data-v-c9db0fe8 data-v-bdde1d39><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-00b38fa1 data-v-a432f868><span class="container" data-v-a432f868><span class="top" data-v-a432f868></span><span class="middle" data-v-a432f868></span><span class="bottom" data-v-a432f868></span></span></button></div></div></div></div><div class="divider" data-v-00b38fa1><div class="divider-line" data-v-00b38fa1></div></div></div><!----></header><!----><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-dd2ea341 data-v-631f6a1b><div class="vp-doc-container has-aside" data-v-631f6a1b data-v-5e118bb0><!--[--><!--]--><div class="container" data-v-5e118bb0><div class="aside" vp-outline data-v-5e118bb0><div class="aside-curtain" data-v-5e118bb0></div><div class="aside-container" data-v-5e118bb0><div class="aside-content" data-v-5e118bb0><div class="vp-doc-aside" data-v-5e118bb0 data-v-5fa8f8c5><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="vp-doc-aside-outline" role="navigation" data-v-5fa8f8c5 data-v-bb59f417><div class="content" data-v-bb59f417><div class="outline-marker" data-v-bb59f417></div><div id="doc-outline-aria-label" aria-level="2" class="outline-title" role="heading" data-v-bb59f417><span data-v-bb59f417>此页内容</span><span class="vpi-print icon" data-v-bb59f417></span></div><ul class="root" data-v-bb59f417 data-v-03c306ab><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-5fa8f8c5></div><!--[--><!--]--></div></div></div></div><div class="content" data-v-5e118bb0><div class="content-container" data-v-5e118bb0><!--[--><!--]--><main class="main" data-v-5e118bb0><!----><!--[--><!--]--><!--[--><div class="vp-doc-title" data-v-403b82e6><!--[--><!--]--><h1 class="page-title" data-v-403b82e6><!----> 随手记 <!----></h1><!--[--><!--]--></div><div class="vp-doc-meta" data-v-403b82e6><!--[--><!--]--><p class="reading-time" data-v-403b82e6><span class="vpi-books icon" data-v-403b82e6></span><span data-v-403b82e6>约 11014 字</span><span data-v-403b82e6>大约 37 分钟</span></p><!----><!--[--><!--]--><p class="create-time" data-v-403b82e6><span class="vpi-clock icon" data-v-403b82e6></span><span data-v-403b82e6>2025-01-10</span></p></div><!--]--><!--[--><!--]--><div class="_notes_10fywd94_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-5e118bb0><!--[--><!--]--><div data-v-5e118bb0><div class="vp-timeline"><div class="vp-timeline-box"><!--[--><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->主机设置旁路代理<!--]--></p><!--[--><p>任意 Linux 主机部署代理服务并设置为旁路。</p><ul><li><p><strong>部署代理</strong></p><div class="language-yaml" data-highlighter="shiki" data-ext="yaml" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-yaml"><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">services</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  mihomo</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> metacubex/mihomo:latest</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> mihomo</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    network_mode</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> host</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    restart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unless-stopped</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    pid</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> host</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ipc</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> host</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    cap_add</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ALL</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    volumes</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./mihomo:/root/.config/mihomo</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">      -</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /dev/net/tun:/dev/net/tun</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  metacubexd</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    image</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ghcr.io/metacubex/metacubexd:latest</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    container_name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> metacubexd</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    ports</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9999:80</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    networks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">home</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">]</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    restart</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> unless-stopped</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">networks</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">  home</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    external</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span></code></pre></div></li><li><p><strong>主机设置</strong></p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 1. 开启 IP 转发</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sysctl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -w</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> net.ipv4.ip_forward=</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">1</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sysctl</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 2. NAT 伪装（让其他设备出网）</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">iptables</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> nat</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -A</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> POSTROUTING</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -o</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> eth0</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -j</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MASQUERADE</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">iptables-save</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /etc/iptables.rules</span></span></code></pre></div></li></ul><p>之后将其他设备的网关和DNS指向此服务 ip 即可。</p><p><strong>注意</strong>：</p><ul><li>其他设备 DNS 必须指向本服务，是为了 fakeip 能正常工作；</li><li>因为 linux 内核默认只发送本机流量，其他从其他设备进入的流量而目的地又不是本机的会被拒绝，开启IP转发是为了能让流量能正常被转发；</li><li>默认情况下 linux 转发流量会带上源IP，这可能导致路由器直接响应给源IP，链路异常。开启 NAT 伪装时，linux 会做一层 NAT，将源IP改成本机IP；</li></ul><!--]--></div><p class="vp-timeline-time">2025-11-12 20:50</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Linux 文件传输<!--]--></p><!--[--><p>两台远程 Linux 主机间传输文件，假设发送端为(192.168.0.6)，接收端为(192.168.0.95)，在发送端执行(关闭加密和压缩)：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 如果 SSH 必须加密，可以选择轻量加密方式&#39;Ciphers=aes128-gcm@openssh.com&#39;，但依然不压缩</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rsync</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ah</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --info=progress2</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -e</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">ssh -o Cipher=none -o Compression=no</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt/app/media/audiobooks/</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> root@192.168.0.95:/DATA/Media/audiobooks/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 也可以用pv(缺点是不知道整体大小，只能正向计算，即只能看到已传输的大小和花费时间，不能断点续传)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># tar cf - /source/ | pv | tar xf - -C /target/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 本地拷贝(显示进度百分比和倒计时，可以断点续传)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rsync</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -ah</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --info=progress2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /source/</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /target/</span></span></code></pre></div><p>此方式可以传输文件和目录，并且可以显示进度，若传输的目录多整体内容也多还是建议打包传输。</p><p>传统打包方式如:<code>tar -cvf audiobookshelf.tar audiobookshelf/</code>，缺点是不能显示打包进度。此时可以借助<code>pv</code>命令(安装<code>apt-get install pv</code>)，脚本如下：</p><div class="language-bash line-numbers-mode has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="bash" style="--vp-collapsed-lines:5;--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查是否安装 pv</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> command</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pv</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">&gt;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /dev/null</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">❌ 错误: 未找到 &#39;pv&#39; 命令，请先安装 pv（例如：sudo apt install pv）</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    exit</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查参数数量</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> $#</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -lt</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ];</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">用法: $0 &lt;源目录&gt; [输出目录]</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">示例: $0 ./audiobooks</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">      $0 ./audiobooks /backup</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    exit</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">SRC</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查源目录是否存在</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$SRC</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ];</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">❌ 错误: 源目录 &#39;$SRC&#39; 不存在或不是目录。</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    exit</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 获取源目录的绝对路径（避免相对路径问题）</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">SRC_ABS</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">realpath</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$SRC</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 确定输出目录</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> $#</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -ge</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 2</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ];</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    OUT_DIR</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$2</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">else</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 默认为源目录的父目录（同级）</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    OUT_DIR</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dirname</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$SRC_ABS</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查输出目录是否存在，若不存在则尝试创建</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -d</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$OUT_DIR</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ];</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">输出目录 &#39;$OUT_DIR&#39; 不存在，正在尝试创建...</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    mkdir</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -p</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$OUT_DIR</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ||</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">❌ 无法创建输出目录</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> exit</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 输出文件名 = 源目录 basename + .tar</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">BASENAME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">basename</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$SRC_ABS</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">OUTPUT_FILE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$OUT_DIR/</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">${</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">BASENAME</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.tar</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 获取总大小（字节）</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">正在计算目录大小...</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">SIZE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">du</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -sb</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$SRC_ABS</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> awk</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">{print $1}</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -z</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$SIZE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ]</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ||</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$SIZE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> -eq</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 0</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ];</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">⚠️  警告: 目录大小为 0，可能为空。</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">    SIZE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">1</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 避免除零或 pv 报错</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">📦 源目录: $SRC_ABS</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">💾 输出到: $OUTPUT_FILE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">📊 总大小: </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">numfmt</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --to=iec-i</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --suffix=B</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> $SIZE </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">2&gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/dev/null </span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">||</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;"> echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">${</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">SIZE</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 字节</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">⏳ 开始打包...</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 执行打包并显示进度</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -cf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> -</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -C</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dirname</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$SRC_ABS</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">$(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">basename</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$SRC_ABS</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> pv</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -s</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$SIZE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$OUTPUT_FILE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -e</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\n✅ 打包完成：$OUTPUT_FILE</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div><div class="collapsed-lines"></div></div><p>接着赋予执行权限:<code>chmod +x tar_with_progress.sh</code>，运行示例：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 示例1：只传源目录 → 输出到同级目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./tar_with_progress.sh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./audiobooks</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 示例2：指定输出目录</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">./tar_with_progress.sh</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ./audiobooks</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /mnt/backup</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2025-11-06 16:59</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->合并Git提交记录<!--]--></p><!--[--><p>两种方式：</p><ul><li><code>git rebase -i</code>: 可以对历史提交 pick(保留提交)、squash(合并到上一条)、edit(修改提交内容)、reword(修改提交信息)。可以去掉某些提交记录，甚至修改提交顺序。</li><li><code>git reset --soft</code>: 直接把 HEAD 重置到历史的一次提交，然后合并最近的所有提交。</li></ul><p>这两种方式都能实现合并提交的效果，但是方式一更灵活，它能实现的不仅是合并的效果；方式二更简单，通常来说只是想合并用这中方式更简单。</p><p>方式一：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 启动 交互式 rebase，操作最近 5 条提交</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># HEAD~5 从 HEAD 记录起(不包含)，往前数 5 条。也可以直接写历史提交 hash，如：git rebase -i a1b2c3d</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 保留最远的那条记录为 pick 不变，最近的几条都改为 squash</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rebase</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -i</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD~5</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看提交历史信息</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --oneline</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 编辑当前正在进行的 rebase 的 todo 列</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rebase</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --edit-todo</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 在 rebase 过程中，完成当前冲突或编辑后，继续执行剩余的 rebase</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rebase</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --continue</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 中止正在进行的 rebase，回到 rebase 开始前的状态。</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rebase</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --abort</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 强推</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --force</span></span></code></pre></div><p>方式二：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 重置当前分支的 HEAD 指针到指定提交，同样可以指定提交 hash</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 会把进 5 次的提交内容撤销，保留在暂存区</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> reset</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --soft</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> HEAD~5</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 提交暂存区所有内容</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commit</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">把前5条提交合并成一条</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看效果</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> log</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --oneline</span></span></code></pre></div><p>reset 模式对比：</p><table><thead><tr><th style="text-align:center;">选项</th><th style="text-align:center;">暂存区</th><th style="text-align:center;">工作区</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">--soft</td><td style="text-align:center;">保留</td><td style="text-align:center;">保留</td><td style="text-align:center;">只移动 HEAD，准备重新提交</td></tr><tr><td style="text-align:center;">--mixed(默认)</td><td style="text-align:center;">清空</td><td style="text-align:center;">保留</td><td style="text-align:center;">重置暂存区，但保留工作区修改</td></tr><tr><td style="text-align:center;">--hard</td><td style="text-align:center;">清空</td><td style="text-align:center;">清空</td><td style="text-align:center;">工作区和暂存区都恢复到指定提交状态，谨慎使用</td></tr></tbody></table><p>这几种模式的常用场景：</p><ul><li>soft(压缩提交): 合并提交历史、回滚但保留未提交的代码。不会动已提交/未提交的任何内容。</li><li>mixed(撤销提交): 取消误 add 的内容。清除历史提交，但保留为提交的内容。</li><li>hard(回退历史): 相当于一键还原，比如试验失败后想回到未试验之前。清除历史提交和本地未提交的内容。</li></ul><!--]--></div><p class="vp-timeline-time">2025-09-02 11:06</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->一键进入BIOS<!--]--></p><!--[--><p>使用方法：命令提示符(管理员身份运行)中输入<code>shutdown /r /fw /t 0</code>回车即可。<br> 命令解释：<code>shutdown</code>表示关机，<code>/r</code>表示重启(reboot)，<code>/fw</code>表示固件(firmware)模式，<code>/t 0</code>表示超时(timeout)为0。<br> 适用系统：Windows10/11。<br> 报错解决：若执行命令后提示<code>操作系统找不到已输入的环境选项。(203)</code>，重复执行一次命令即可。</p><!--]--></div><p class="vp-timeline-time">2025-08-22 22:56</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->下载网站图标<!--]--></p><!--[--><p>获取网站图标的 3 种方式(以 https://google.com 为例)：</p><ul><li>https://www.google.com/favicon.ico</li><li>https://www.google.com/s2/favicons?sz=64&amp;domain=google.com</li><li>https://favicon.im/zh/google.com?larger=true</li></ul><!--]--></div><p class="vp-timeline-time">2025-08-18 13:51</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->GitHub Sync Fork 私有仓库<!--]--></p><!--[--><p>当我们在 GitHub Fork 了一个仓库后，如果仓库设置为公开，则可以方便的在页面上点击<code>Sync Fork</code>来同步上游更新，但如果仓库设置为私有，则会断开与上游的关联，此时如果需要同步上游就需要手动建立关联。一键同步脚本示例：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">#!/bin/bash</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># sync-fork.sh - 使用 rebase 同步私有 fork（保留自己的提交）</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">set</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -e</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 一旦出错就退出</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">BRANCH</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">main</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 要同步的分支</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 检查是否配置了 upstream</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> remote</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -q</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> upstream</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> remote</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> upstream</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> git@github.com:shenweiyan/WebStack-Hugo.git</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&gt;&gt;&gt; 获取上游更新</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fetch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> upstream</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&gt;&gt;&gt; 切换到 $BRANCH 分支</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> checkout</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$BRANCH</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&gt;&gt;&gt; 开始 rebase 到 upstream/$BRANCH</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">if</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> !</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rebase</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">upstream/$BRANCH</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> then</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">⚠️  rebase 过程中出现冲突，请手动解决冲突：</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    1. 解决冲突后运行： git add .</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    2. 继续 rebase：   git rebase --continue</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    3. 完成后推送：   git push origin $BRANCH</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">    exit</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 1</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&gt;&gt;&gt; 推送到 origin/$BRANCH（强制更新以保持线性历史）</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$BRANCH</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --force-with-lease</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">✅ 同步完成（使用 rebase 保持线性历史）</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2025-08-14 18:05</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->推送本地 Git 仓到远程<!--]--></p><!--[--><p>先在远程创建一个仓库，然后复制地址，如：<code>ssh://gogs.mc.lan/mayee/example.git</code>。<br> 接着在本地执行如下命令：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 可以是 ssh 或 https 协议的地址</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> remote</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ssh://gogs.mc.lan/mayee/example.git</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># main 表示远程分支名</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -u</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2025-06-24 12:37</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->vscode 生成 Java 类序列化版本号<!--]--></p><!--[--><p>首先要确保已经安装了插件<code>Language Support for Java(TM) by Red Hat</code>，然后在工程根目录下创建两个文件<code>org.eclipse.jdt.core.prefs</code>、<code>settings.json</code>，目录结构如下：</p><div class="language-plain" data-highlighter="shiki" data-ext="plain" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-plain"><span class="line"><span>project-name</span></span>
<span class="line"><span>├── .settings</span></span>
<span class="line"><span>│   └── org.eclipse.jdt.core.prefs</span></span>
<span class="line"><span>├── .vscode</span></span>
<span class="line"><span>│   └── settings.json</span></span>
<span class="line"><span>├── src // 项目源代码</span></span>
<span class="line"><span>│   └── ...</span></span>
<span class="line"><span>└── pom.xml</span></span></code></pre></div><p>文件内容分别如下：</p><div class="code-block-title" data-title="org.eclipse.jdt.core.prefs"><div class="code-block-title-bar"><span class="title">org.eclipse.jdt.core.prefs</span></div><div class="language-text" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span>org.eclipse.jdt.core.compiler.problem.missingSerialVersion=warning</span></span></code></pre></div></div><div class="code-block-title" data-title="settings.json"><div class="code-block-title-bar"><span class="title"><!---->settings.json</span></div><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">   &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">java.settings.url</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.settings/org.eclipse.jdt.core.prefs</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre></div></div><p>之后就可以像 IDEA 那样在实现了<code>Serializable</code>接口但又没有<code>serialVersionUID</code>的类就会显示警告，点击类名就可以自动生成版本号。</p><!--]--></div><p class="vp-timeline-time">2025-06-18 05:20</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->vscode 安装 go tools<!--]--></p><!--[--><p>go tools 是 go 语言提供的一些工具，首先安装 Go 插件，使 vscode 能支持 go 语言。接着在 IDE 的顶部点击<code>查看</code>-&gt;<code>命令面板</code>或者输入<code>ctrl+shift+p/a</code>也能打开命令面板，输入<code>Go:Install/Update Tools</code>，然后选择所有选项，就会自动安装 go tools，等待安装完成即可，工具被安装在<code>$GOBIN</code>目录。</p><p>总共 7 个工具：</p><ul><li>gopls: Go 语言服务器，智能补全/跳转等</li><li>dlv: Delve，Go 调试工具</li><li>goimports: 自动格式化并添加/移除 import</li><li>goreturns: 类似 goimports，可自动生成 return</li><li>staticcheck: 静态代码分析工具</li><li>go-outline: 支持代码大纲视图</li></ul><!--]--></div><p class="vp-timeline-time">2025-06-15 05:47</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->虚拟机磁盘/Ubuntu分区扩容<!--]--></p><!--[--><p>使用 VMware 虚拟机，安装了 Ubuntu 系统，可能发现刚开始分配的磁盘不足(仅20G)，此时就需要扩容(到30G)。</p><ul><li><p><strong>扩容磁盘</strong></p><p>1.关闭虚拟机。</p><p>2.编辑虚拟机，扩展磁盘容量，然后启动虚拟系统。</p><p>3.进系统后输入<code>lsblk</code>，查看磁盘分区情况。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      MAJ:MIN</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  SIZE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RO</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TYPE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MOUNTPOINTS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sda</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                         8:0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   30G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> disk</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├─sda1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      8:1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    1M</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> part</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├─sda2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      8:2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  1.8G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> part</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /boot</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">└─sda3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      8:3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  8.2G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> part</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  └─ubuntu--vg-ubuntu--lv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 252:0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  8.2G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lvm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  /</span></span></code></pre></div><p>可以看到虚拟机磁盘<code>sda</code>总共有 30G，分为三个分区<code>sda1</code>、<code>sda2</code>、<code>sda3</code>，但这三个分区加起来也只有10G(1M+1.8G+8.2G)，说明原本的 20G 磁盘中有 10G 是没分配的，并且增加的 10G 磁盘也还没有分区。</p><p>4.<code>sudo fdisk -l /dev/sda</code>查看未分配空间。</p><p>5.安装分区工具(若未安装)<code>sudo apt update &amp;&amp; sudo apt install cloud-guest-utils -y</code>。</p><p>6.<code>sudo growpart /dev/sda 3</code>这会把<code>sda3</code>分区结尾扩展到磁盘最大容量。此时使用<code>lsblk</code>查看:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      MAJ:MIN</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  SIZE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RO</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TYPE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MOUNTPOINTS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sda</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                         8:0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   30G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> disk</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├─sda1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      8:1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    1M</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> part</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">├─sda2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      8:2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  1.8G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> part</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /boot</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">└─sda3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      8:3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 28.2G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> part</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  └─ubuntu--vg-ubuntu--lv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 252:0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  8.2G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lvm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  /</span></span></code></pre></div><p>可以看到<code>sda3</code>分区扩大到整个磁盘了，但是根分区<code>ubuntu--vg-ubuntu--lv</code>仍然没变。</p></li><li><p><strong>扩容根分区</strong></p></li></ul><p>1.<code>sudo pvresize /dev/sda3</code>扩展 LVM 物理卷。</p><p>2.<code>sudo lvextend -l +100%FREE /dev/mapper/ubuntu--vg-ubuntu--lv</code>扩展逻辑卷(根分区 /)。</p><p>3.<code>sudo resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv</code>扩展文件系统(ext4格式用，ubuntu系统通常是这个)，如果是 xfs 格式用<code>sudo xfs_growfs /</code>，这让系统能使用新空间。此时使用<code>lsblk</code>查看:</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  NAME</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      MAJ:MIN</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RM</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  SIZE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> RO</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> TYPE</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> MOUNTPOINTS</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  sda</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                         8:0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">   30G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> disk</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ├─sda1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      8:1</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">    1M</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> part</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  ├─sda2</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      8:2</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  1.8G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> part</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /boot</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  └─sda3</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">                      8:3</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 28.2G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> part</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    └─ubuntu--vg-ubuntu--lv</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 252:0</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">    0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> 28.2G</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">  0</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> lvm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  /</span></span></code></pre></div><p>可以看到根分区<code>ubuntu--vg-ubuntu--lv</code>已经使用 sda3 分区整个空间了。</p><!--]--></div><p class="vp-timeline-time">2025-06-14 23:47</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Git 配置仓库用户名和邮箱<!--]--></p><!--[--><p>为某个仓库设置单独的用户名和邮箱，需要在仓库根目录执行以下命令：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user.name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">YourName</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user.email</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">you@example.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre></div><p>查看配置<code>git config --local --list</code>，或者只查看邮箱<code>git config user.email</code>。这个设置被保存在<code>&lt;本地仓库路径&gt;/.git/config</code>文件中。</p><!--]--></div><p class="vp-timeline-time">2025-06-14 20:32</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->OpenWrt UCI 配置操作函数<!--]--></p><!--[--><p>在<code>/etc/init.d/*</code>下的脚本中如果想使用配置如何做呢？这就需要 UCI 配置操作的几个函数<code>config_load</code>、<code>config_foreach</code>、<code>config_get</code>，见名知其意，大概知道函数的意思，但如何使用需要详细了解下。</p><p>例如脚本中存在这么一段：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  start_instance</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    local</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> section</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    config_get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$section</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    config_get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> port</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$section</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">port</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    service_start</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/bin/svnserve</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --listen-port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ${</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">port</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ${</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">path</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  start</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    config_load</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">subversion</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    config_foreach</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start_instance</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">subversion</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  }</span></span></code></pre></div><ul><li><p><strong>config_load</strong>: 读取<code>/etc/config/*</code>下指定名称的文件，如<code>config_load &#39;subversion&#39;</code>即是读取<code>/etc/config/subversion</code>文件，文件内容示例：</p><div class="code-block-title" data-title="subversion"><div class="code-block-title-bar"><span class="title">subversion</span></div><div class="language-ini" data-highlighter="shiki" data-ext="ini" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-ini"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  config svn</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      option path     </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/srv/svn/repos</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      option port     </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">3690</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">  config pdd svn1</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">      option path     </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">/srv/svn/repos/clash-meta</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span></code></pre></div></div><p>其中每一段表示为一个<code>section</code>，上述配置有 2 个 section；而<code>svn</code>和<code>pdd</code>表示<code>section_type</code>，section_type 后面是<code>section_name</code>它必须是唯一值，如果没有指定 section_name 则表示为匿名 section，会自动分配一个唯一 id 作为它的 name。</p></li><li><p><strong>config_foreach</strong>: 语法为<code>config_foreach &lt;function&gt; &lt;section_type&gt;</code>，遍历指定类型的 section，对每个 section 执行指定的函数。例如：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 遍历所有 section_type 为 svn 的 section，则 pdd 的 section 就不会被遍历</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">config_foreach</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start_instance</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">svn</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span></code></pre></div></li><li><p><strong>config_get</strong>: 使用语法为<code>config_get &lt;var&gt; &lt;section_name&gt; &lt;option&gt; [&lt;default&gt;]</code>，<code>var</code>是将读取的值用一个变量存储，<code>section_name</code>是指定的段名，<code>option</code>是 section 下的 option 名称，<code>default</code> 是当 option 不存在时的默认值。例如：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 加载配置文件</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  config_load</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">subversion</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 读取名称为 svn1 的 section 下，option 为 port 的值，如果没有则默认为 8080，并将值存储在变量 p1 中</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  config_get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> p1</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> svn1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">port</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 8080</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  config_foreach</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> start_instance</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">svn</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">  # 这是提前定义的一个函数</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  start_instance</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> ()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    # 系统会自动把 section_name 作为第一个参数传入。但这里 section_type 为 svn 的 section 是一个匿名的段，则分配的随机 id 可能为 cfg0a1b23</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    local</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> section</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">=</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # cfg0a1b23</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">    config_get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">$section</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">path</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  }</span></span></code></pre></div></li></ul><!--]--></div><p class="vp-timeline-time">2025-06-06 04:41</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Windwos 安装 SVN 客户端<!--]--></p><!--[--><p>可以上<a href="https://subversion.apache.org/packages.html" target="_blank" rel="noopener noreferrer">Apache Subversion</a>下载二进制包，亦或者上<a href="https://tortoisesvn.net/downloads.zh.html" target="_blank" rel="noopener noreferrer">TortoiseSVN(推荐)</a>下载，Windows 上最常用的就是这个了。<br> 在安装<code>TortoiseSVN</code>的过程中要注意一点，<code>Command Line Tools</code>默认不会安装，但需要勾选安装，这样在安装完成后会在<code>C:\Program Files\TortoiseSVN\bin</code>目录下出现<code>svn.exe</code>，然后就可以在其他代码编辑器中配置 SVN 插件了。</p><!--]--></div><p class="vp-timeline-time">2025-06-05 17:35</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->编辑远程 Linux 文件<!--]--></p><!--[--><p>由于经常需要编辑 OpenWrt 系统上的文件，终端上编辑器不好用，下载编辑后再上传又麻烦。如果有一款工具可以连接远程主机，然后像 Windows 文件管理器那样可视化查看，双击编辑，保存就生效，那就需要<a href="https://winscp.net/eng/download.php" target="_blank" rel="noopener noreferrer">WinSCP</a>。<br> 使用很简单，点击<code>新建站点</code>，<code>文件协议</code>选择<code>SCP</code>，输入<code>主机名</code>、<code>用户名</code>、<code>密码</code>，端口默认<code>22</code>，然后连接即可。可以在<code>选项</code>-&gt;<code>编辑器</code>中配置外部编辑器为 VSCode。</p><!--]--></div><p class="vp-timeline-time">2025-06-05 16:47</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Windows11 设置加密 DNS<!--]--></p><!--[--><p>由于家里有 IPv6 的动态公网，做了 DDNS 解析，一开始好好的，一段时间后突然就发现连接不通了。首先检查域名托管商那的记录，发现记录的 IPv6 是最新地址，没毛病。然后通过<code>ping &lt;子域名&gt;</code>发现返回的 IPv6 地址是旧的，这自然就不会通。但是用<code>nslookup &lt;子域名&gt;</code>发现返回的 IPv6 地址是最新的，那么访问应该是没问题的。可我这是家宽啊，又不过 GFW，不应该是域名被墙了。由于我把主域名和泛域名解析的是同一地址，于是试了下<code>ping &lt;主域名&gt;</code>发现返回的是最新的地址，再<code>ping &lt;子域名&gt;</code>呢？仍然返回旧地址，说明运营商的 DNS 服务器没问题，就是单纯的把我子域名通过 DNS 污染了，解决方法到也简单，设置加密 DNS 即可。</p><p>打开<code>设置</code>-&gt;<code>网络和 Internet</code>，选择<code>已连接</code>的网络-&gt;<code>属性</code>，在<code>DNS 服务器分配</code>一栏点<code>编辑</code>。</p><p>默认是<code>自动(DHCP)</code>意思就是说自动给的 DNS 服务器地址是 DHCP 服务器的地址，那么 DHCP 服务器是谁呢？简单来说就是谁分配 IP 谁就是 DHCP，对局域网来说这个 DHCP 就是路由器，但是路由器可以帮你做内网的地址交换，你如果请求的是一个互联网地址，它就只能把这个地址继续向上级请求，这里上级就是运营商的 DNS 服务器了，所以运营商就会在这个环节使坏，给一个错误的 IP 地址导致通过域名请求不通。</p><p>所以我们得改成<code>手动</code>，因为我的域名只做了 IPv6 的地址解析，理论上来说改一下 IPv6 的 DNS 地址就可以了，不过为了隐私安全，最好还是连 IPv4 也设置下。</p><p><strong>IPv4</strong>：</p><table><thead><tr><th style="text-align:center;">首/备选 DNS</th><th style="text-align:center;">DNS over HTTPS</th><th style="text-align:center;">DNS over HTTPS 模板</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">223.5.5.5</td><td style="text-align:center;">开(手动模板)</td><td style="text-align:center;">https://dns.alidns.com/dns-query</td><td style="text-align:center;">阿里公共加密DNS</td></tr><tr><td style="text-align:center;">119.29.29.29</td><td style="text-align:center;">开(手动模板)</td><td style="text-align:center;">https://doh.pub/dns-query</td><td style="text-align:center;">腾讯公共加密DNS</td></tr></tbody></table><p><strong>IPv6</strong>：</p><table><thead><tr><th style="text-align:center;">首/备选 DNS</th><th style="text-align:center;">DNS over HTTPS</th><th style="text-align:center;">DNS over HTTPS 模板</th><th style="text-align:center;">说明</th></tr></thead><tbody><tr><td style="text-align:center;">2400:3200::1</td><td style="text-align:center;">开(手动模板)</td><td style="text-align:center;">https://dns.alidns.com/dns-query</td><td style="text-align:center;">阿里公共加密DNS</td></tr><tr><td style="text-align:center;">2402:4e00::</td><td style="text-align:center;">开(手动模板)</td><td style="text-align:center;">https://doh.pub/dns-query</td><td style="text-align:center;">DNSPod加密DNS(腾讯系的)</td></tr></tbody></table><p>注意，<code>2402:4e00::</code>这个并没有写错，看起来像是不完整，因为 DNSPod 它又很多 DNS 地址，这里写的是一个范围。</p><p>经过上述设置后，再<code>ping &lt;子域名&gt;</code>已经可以返回最新的 IP 了，但整体速度很慢，大约 3~5 秒才响应，这个其实是运营商对我的 IPv6 访问限速了。不过对我来说问题不大，只要能通就行，毕竟这是一个非常低频的动作。<br> 我的回家方式是，通过域名(IPv6)访问到家里路由器 WAN 网卡的固定端口，在这个端口上有一个反代服务指向了内网的一个 HTTP 服务，然后通过 HTTP 返回就能获取到 IPv4 的回家节点，之后全程用 IPv4 就可以满速回家了。</p><!--]--></div><p class="vp-timeline-time">2025-06-04 06:36</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Windows11 设置局域网代理<!--]--></p><!--[--><p>按<code>Win + R</code>打开运行，然后输入<code>inetcpl.cpl</code>在打开的面板中选择<code>连接</code>-&gt;<code>局域网设置</code>，在<code>代理服务器</code>下手动设置地址和端口。</p><!--]--></div><p class="vp-timeline-time">2025-06-04 06:32</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Windows11 管理软件开机启动<!--]--></p><!--[--><p>一部分软件安装后可能会默认开机启动，但我并不需要，这反而增加了开机耗时。一般软件设置中都有自启开关，但也有没有这个开关的软件，例如<code>Tailscale</code>。<br> 我们可以按<code>Ctrl + Shift + ESC</code>打开任务管理器，在<code>启动</code>(Win10)或<code>启动应用</code>(Win11)一栏中可以看到软件的状态，<code>已启用</code>表示已开机自自启、<code>已禁用</code>表示已禁止开机自启。鼠标右键单击相应的软件即可<code>启用</code>/<code>禁用</code>。</p><!--]--></div><p class="vp-timeline-time">2025-06-04 01:19</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->ThinkPad 安装 Win7 系统<!--]--></p><!--[--><p>这个 ThinkPad E545 edge 购于 2013年左右，算是古董级电脑了。搭载 APU A8-5550M 性能中下，英雄联盟都玩不了，很拉跨。但硬件又还是好的，浏览网页还是没问题的。于是选择<a href="https://msdn.itellyou.cn/" target="_blank" rel="noopener noreferrer">Win7 企业版 SP1</a>，一定要带 SP1 否则有些软件可能安装不了。目前很多软件已经不支持这么老的系统了，但是没办法，古董级运行Win10太吃力了。<br> 写盘工具可以选择<a href="https://github.com/pbatard/rufus/releases/download/v3.22/rufus-3.22.exe" target="_blank" rel="noopener noreferrer">rufus-3.22</a>最后一个支持 Win7 的版本，或者<a href="https://mirrors.sdu.edu.cn/wepe/WePE_64_V1.3.exe" target="_blank" rel="noopener noreferrer">微PE工具箱V1.3</a>(推荐)。<br> 开机按<code>F1</code>进入 BIOS，系统安装完成后会发现没有任何驱动，无法联网(有线/无线)，无法识别U盘，这就蛋疼了。不过随后发现 USB3.0 需要驱动，但 USB2.0 不需要驱动，此时可以下载<a href="https://dl.360safe.com/drvmgr/360DrvMgrInstaller_net.exe" target="_blank" rel="noopener noreferrer">360驱动大师网卡版</a>，然后插 USB3.0 接口安装，如果不行可以进入到 PE 系统，然后安装。</p><!--]--></div><p class="vp-timeline-time">2025-06-04 01:03</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->小米本安装 Win10 系统<!--]--></p><!--[--><p>这个小米购于 2019-11-11，比较老的电脑了，系统卡顿。网上找各种精简版系统体验都不好，打算下载 LTSC 版本(企业长期支持版)。此版本主打稳定少变动，相比家庭版本来就会精简一些。考虑到我这小米本发售的时间段，设备配套的系统往往都是出厂版本是最流畅的，于是下载<a href="https://msdn.itellyou.cn/" target="_blank" rel="noopener noreferrer">Windwos10 2019 LTSC</a>。</p><p>当前有两块硬盘(0: 因特尔；1: 三星)，三星是自带的，因特尔是加装的。Windows 系统安装到三星硬盘，因为英特尔硬盘还能安装黑苹果，但三星硬盘不能。<br> 下载<a href="https://rufus.ie/zh/" target="_blank" rel="noopener noreferrer">Rufu 标准版</a>将系统写入 U 盘，然后电脑开机按<code>F2</code>进入 BIOS 设置 U 盘启动，保存后再开机即可进入 U 盘开始刷机。<br> 重新进入系统后，<a class="vp-link link" href="/notes/q5w629t0/"><!--[-->激活系统<!--]--><!----></a>，然后<code>win+r</code>输入<code>sysdm.cpl</code>回车打开窗口，在上方 tab 栏中选择<code>高级</code>-&gt;<code>设置</code>，然后更改选项<code>调整为最佳性能</code>，这样会停用系统在的一些动态效果，使用更流畅且省电。</p><!--]--></div><p class="vp-timeline-time">2025-05-29 11:23</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->为仓库单独设置 Git 提交邮箱<!--]--></p><!--[--><p>在工程的<code>.git</code>目录下找到<code>config</code>文件，在其中添加，如：</p><div class="language-text" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span>[user]</span></span>
<span class="line"><span>  name = Bobby</span></span>
<span class="line"><span>  email = bobby@qq.com</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2025-01-27 16:36</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Docker Desktop 设置仓库镜像<!--]--></p><!--[--><div class="language-text" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span>// Docker中国区官方镜像</span></span>
<span class="line"><span>https://registry.docker-cn.com</span></span>
<span class="line"><span>// 中科大</span></span>
<span class="line"><span>//https://docker.mirrors.ustc.edu.cn/</span></span>
<span class="line"><span>// 网易</span></span>
<span class="line"><span>https://hub-mirror.c.163.com/</span></span>
<span class="line"><span>// 腾讯</span></span>
<span class="line"><span>https://mirror.ccs.tencentyun.com</span></span></code></pre></div><p>打开Docker Desktop设置 &gt; Docker Engine</p><p>默认情况下配置如下：</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">builder</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">gc</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">      &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">defaultKeepStorage</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20GB</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">      &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">enabled</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  },</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">experimental</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre></div><p>新增配置后如下：</p><div class="language-json" data-highlighter="shiki" data-ext="json" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-json"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">builder</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">gc</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">      &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">defaultKeepStorage</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">20GB</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">      &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">enabled</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  },</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">experimental</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">registry-mirrors</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> [</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://registry.docker-cn.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://docker.mirrors.ustc.edu.cn</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">    &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">https://hub-mirror.c.163.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  ]</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre></div><p>使用<code>docker info</code>命令可以查看 Docker 配置。</p><!--]--></div><p class="vp-timeline-time">2024-04-28 22:43</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Windows 找到所有应用<!--]--></p><!--[--><p>打开<code>文件资源管理器</code>(Win + E)，然后在地址栏中输入<code>shell:AppsFolder</code>，然后按回车键。</p><!--]--></div><p class="vp-timeline-time">2024-04-28 15:15</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Windows 添加小鹤双拼<!--]--></p><!--[--><p>新建文本文件，将以下命令粘贴到文本中保存，文件后缀修改为<code>.reg</code>，然后双击执行。 注意，文本默认是以<code>UTF-8</code> 编码保存，在 Windows 系统中文会乱码，需要将文本编码修改为<code>GBK</code>才能正常显示。</p><p>添加小鹤双拼：</p><div class="language-txt" data-highlighter="shiki" data-ext="txt" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-txt"><span class="line"><span>Windows Registry Editor Version 5.00</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[HKEY_CURRENT_USER\SOFTWARE\Microsoft\InputMethod\Settings\CHS]</span></span>
<span class="line"><span>&quot;EnableExtraDomainType&quot;=dword:00000001</span></span>
<span class="line"><span>&quot;Enable Double Pinyin&quot;=dword:00000001</span></span>
<span class="line"><span>&quot;DoublePinyinScheme&quot;=dword:0000000a</span></span>
<span class="line"><span>&quot;UserDefinedDoublePinyinScheme0&quot;=&quot;小鹤双拼*2*^*iuvdjhcwfg^xmlnpbksqszxkrltvyovt&quot;</span></span></code></pre></div><p>关闭小鹤双拼：</p><div class="language-txt" data-highlighter="shiki" data-ext="txt" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-txt"><span class="line"><span>Windows Registry Editor Version 5.00</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[HKEY_CURRENT_USER\SOFTWARE\Microsoft\InputMethod\Settings\CHS]</span></span>
<span class="line"><span>&quot;EnableExtraDomainType&quot;=dword:00000000</span></span>
<span class="line"><span>&quot;Enable Double Pinyin&quot;=dword:00000000</span></span>
<span class="line"><span>&quot;DoublePinyinScheme&quot;=dword:00000000</span></span>
<span class="line"><span>&quot;UserDefinedDoublePinyinScheme0&quot;=-</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2023-03-24 00:15</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Windows 去除快捷方式小箭头<!--]--></p><!--[--><p>新建文本文件，将以下命令粘贴到文本中保存，文件后缀修改为<code>.bat</code>，然后以管理员权限运行。</p><p>去除小箭头：</p><div class="language-bat" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bat"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">reg</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> add </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Icons</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /v </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">29</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /d </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">systemroot</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\system32\imageres.dll,197</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /t reg_sz /f</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">taskkill</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /f /im explorer.exe</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">attrib</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -s -r -h </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">userprofile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\AppData\Local\iconcache.db</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">del</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">userprofile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\AppData\Local\iconcache.db</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /f /q</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">start</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> explorer</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">pause</span></span></code></pre></div><p>恢复小箭头：</p><div class="language-bat" data-highlighter="shiki" data-ext="bat" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bat"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">reg</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> delete </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\Shell Icons</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /v </span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">29</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /f</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">taskkill</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /f /im explorer.exe</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">attrib</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> -s -r -h </span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">userprofile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\AppData\Local\iconcache.db</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">del</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">userprofile</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">%</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">\AppData\Local\iconcache.db</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> /f /q</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">start</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> explorer</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">pause</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2023-03-18 21:21</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Git 暂存代码<!--]--></p><!--[--><p>当我们在某一个分支进行开发时，突然要修一个紧急故障，就需要切换到其他分支，如果直接切到另一个分支，就需要提交当前分支代码，可是半成品代码提交上去也不合适。 此时就需要将代码压入暂存区，然后就可以切换到其他分支，待修复完后再切回来，将暂存区的代码弹出。</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 压入暂存区</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stash</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 弹出暂存区</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> stash</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pop</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2022-12-20 23:07</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->fastjson 转换 double变 decimal<!--]--></p><!--[--><p>fastjson 避免实体转 json 对象时，double 类型变成 decimal 类型</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">public</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> JSONObject </span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toUnderlineObj</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Object object</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    int</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> disableDecimalFeature</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> JSON</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">DEFAULT_PARSER_FEATURE</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &amp;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> ~</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Feature</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">UseBigDecimal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">getMask</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">    return</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> JSON</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">parseObject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toUnderlineStr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">object</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">),</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> JSONObject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">class</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> disableDecimalFeature</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> Feature</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">OrderedField</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2022-12-20 22:55</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->RabbitMQ 消费者单活<!--]--></p><!--[--><p>当启动了多个消费者实例时，如果只允许其中一个进行消费，需要在创建 queue 时需指定参数。 <code>Activity status</code>处于<code>single active</code>的实例可以消费，其他实例为<code>waiting</code>状态，只能在<code>single active</code>实例停止消费后，才会有一个可以消费。</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">Map</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">String</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> Object</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&gt;</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> HashMap</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">put</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">x-single-active-consumer</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">channel</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">queueDeclare</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> isDurable</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> args</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2022-12-20 22:49</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Go 判断 struct 是否实现接口<!--]--></p><!--[--><div class="language-go" data-highlighter="shiki" data-ext="go" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-go"><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> _</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> Animal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> (</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">*</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">Dog</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)(</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">nil</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span>
<span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">var</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> _</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;"> Animal</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> new</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2E8F82;--shiki-dark:#5DA994;">Dog</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">)</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2022-12-17 18:06</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Elasticsearch 批量操作<!--]--></p><!--[--><p>我们在进行 es 批量写时，通常会用到 bulk api，它的 operateType 支持 4 种：</p><ul><li>create：如果文档不存在就创建，但如果文档存在就返回错误；</li><li>index：如果文档不存在就创建，如果文档存在就更新；</li><li>update：更新一个文档，如果文档不存在就返回错误；</li><li>delete：删除一个文档，如果要删除的文档id不存在，就返回错误；</li></ul><p>需要注意的是，index 操作可以实现 upsert 效果，但是它的更新方式是，先删除原文档，然后再插入文档。如果我们只想更新给定的字段，而已存在文档其他未指定字段不动，就需要用到如下方式：</p><div class="language-java" data-highlighter="shiki" data-ext="java" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-java"><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    @</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">Test</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">    void</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> testEsAdd</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">()</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        JSONObject</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> JSONObject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">put</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">Regan</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">put</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">age</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">20</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        JSONObject</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> JSONObject</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">();</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">put</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">doc</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">put</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">upsert</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">body</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">        QueryRequest</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> request</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> new</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> QueryRequest</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">HttpMethod</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">POST</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">name</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(),</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">index_bobby/test/1/_update</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        request</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">setJsonEntity</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">JSON</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">toJSONString</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">source</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> SerializerFeature</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">DisableCircularReferenceDetect</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">        es</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">bulk</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">Collections</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">.</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">singletonList</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">request</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">));</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">    }</span></span></code></pre></div><p>bulk 的 operateType 使用 update。</p><!--]--></div><p class="vp-timeline-time">2022-12-17 18:03</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Goland 中使用 go 工具命令<!--]--></p><!--[--><p>在使用 Goland(IDEA 安装 Go 插件也可)时，我们创建一个<code>运行/调试配置</code>，选择<code>Go构建</code>面板，其中有<code>Go 工具实参</code>和<code>程序实参</code>两项。 当我们在程序中使用 flag 接收启动指令的参数，应该写在<code>程序实参</code>栏中，例如：<code>--debug</code>、<code>--env=dev</code>。 当我们需要从外部替换源文件中的变量值，使用的是 go build -ldflags 参数名，则应在<code>Go 工具实参</code> 栏中填写，例如：<code>-ldflags &quot;-X &#39;core.Version=1.1.1&#39;&quot;</code>。 当我们需要条件编译时，使用的是 go build -tags 参数名，则应在<code>Go 工具实参</code>栏中填写，例如：<code>-tags pro</code> 。前提是源文件中第一行有<code>//go:build pro</code>或<code>+build pro</code>。 <code>//go:build</code>与<code>+build</code>的区别：<code>//go:build</code>写法是 Go 1.17 引入的，旨在替换<code>+build</code>写法。为什么要采用新写法呢，看如下两个示例：</p><ul><li><code>//go:build linux &amp;&amp; amd64 || darwin</code></li><li><code>+build linux,amd64 darwin</code></li></ul><p>这两种实现效果等价。显而易见的是，<code>go:build</code>这种写法对开发来说更直观，同时也与<code>//go:embed</code>和<code>//go:generate</code>命令，格式上进行了统一。 很多时候我们会看到一个文件顶部，同时有这两种写法，主要是为了兼容 Go 1.17 以下的版本。</p><!--]--></div><p class="vp-timeline-time">2022-12-17 17:18</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Linux 环境变量设置<!--]--></p><!--[--><ul><li>系统级：<code>/etc/profile</code>、<code>/etc/bashrc（Ubuntu和Debian中是/etc/bash.bashrc）</code>、<code>/etc/environment</code></li><li>用户级：<code>~/.profile（推荐首选）</code>、<code>~/.bashrc</code></li></ul><p>系统级的环境变量在每个用户登录时都会加载，用户级的环境变量只有在当前用户登录时加载。开发环境建议配置为用户级环境变量。 在 JDK 官网下载的 .deb 文件，安装是在<code>/usr/lib/jvm/</code>目录下。 <code>/lib</code>是内核级目录，<code>/usr/lib</code>是系统级目录，<code>/usr/local/lib</code>是用户级目录。安装 Go、Node、Maven 等开发环境时，可以将压缩包解压至<code>/usr/local/lib</code>目录中，然后在<code>~/.profile</code>文件中配置用户环境变量。 进行设置后，可运用<code>source ~/.bashrc</code>命令更新<code>.bashrc</code>，也可运用<code>source ~/.profile</code>命令更新<code>.profile</code> 参考：<a href="https://www.php.cn/linux-492794.html" target="_blank" rel="noopener noreferrer">linux中环境变量在哪个文件</a>、<a href="https://blog.csdn.net/heybeaman/article/details/87289405" target="_blank" rel="noopener noreferrer">bashrc与profile的区别</a></p><!--]--></div><p class="vp-timeline-time">2022-09-12 14:23</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Webstorm 终端运行 hexo 服务<!--]--></p><!--[--><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hexo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> clean</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> `&amp;`</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> hexo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> server</span></span></code></pre></div><p>腾讯云 cloudBase 中的构建命令</p><div class="language-shell" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-shell"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hexo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> clean</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> &amp;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> npx</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> hexo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> generate</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2022-09-03 19:45</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Windows11 开启 SMB<!--]--></p><!--[--><p><code>win+x</code>打开<code>运行</code>，然后输入<code>shrpubw</code>，根据提示创建共享目录。<br> 安卓端使用<code>Oplayer</code>播放器，IOS端使用<code>nplayer</code>播放器比较方便使用，如果要输入密码，则是 windows 的登录账号、密码。</p><!--]--></div><p class="vp-timeline-time">2022-09-03 17:24</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->解决 coding 不能拉代码<!--]--></p><!--[--><p><a href="https://help.coding.net/docs/repo/ssh/config.html" target="_blank" rel="noopener noreferrer">coding 配置 ssh 秘钥</a>，配置个人公钥是可以对账号所有的代码仓库进行读写。团队公钥默认只读，可以设置读写。但根据官网提示，配置完秘钥后，执行<code>ssh -T git@e.coding.net</code>还是提示没有权限。<br> 解决方法：找到 git 的安装目录<code>C:\Config\Git\etc\ssh</code>下的<code>ssh_config</code>文件，用记事本打开，在末尾处添加：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># Added by git-extra</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">Host</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> *</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">.coding.net</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  HostkeyAlgorithms</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +ssh-rsa</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">  PubkeyAcceptedAlgorithms</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> +ssh-rsa</span></span></code></pre></div><p>保存关闭即可，再次输入：<code>ssh -T git@e.coding.net</code>，然后即可拉取代码。</p><!--]--></div><p class="vp-timeline-time">2022-09-02 22:53</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Git 优雅合并分支<!--]--></p><!--[--><p>当存在多个分支需要合并时，例如，<code>master</code>(主干分支)，<code>dev</code>(开发分支)，直接使用<code>merge</code>会导致主分支混乱，看起来不是一条直线，解决方式是使用<code>rebase</code>，具体操作：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">checkout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dev</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">rebase</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> onto</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">checkout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">merge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dev</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> into</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2022-07-05 16:55</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Deepin 创建桌面图标和启动器图标<!--]--></p><!--[--><ul><li><p>创建桌面图标</p><p>当我们用压缩包解压安装某个应用软件的时候，例如 IDEA，解压完成后，在桌面上创建一个文件例如<code>IDEA-2022.1.desktop</code>，后缀为<code>.desktop</code>，但可以用文本编辑器打开，打开后在编辑内容如下:</p><div class="language-text" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span>[Desktop Entry]</span></span>
<span class="line"><span>Categories=Application;Development;</span></span>
<span class="line"><span>Comment=IntelliJ IDEA Ultimate 2022.1</span></span>
<span class="line"><span>Encoding=UTF-8</span></span>
<span class="line"><span>Exec=/opt/apps/idea-IU-221.5080.210/bin/idea.sh</span></span>
<span class="line"><span>Icon=/opt/apps/idea-IU-221.5080.210/bin/idea.png</span></span>
<span class="line"><span>Name=IDEA-2022.1</span></span>
<span class="line"><span>StartupNotify=true</span></span>
<span class="line"><span>Terminal=false</span></span>
<span class="line"><span>Type=Application</span></span>
<span class="line"><span>X-Deepin-Vendor=user-custom</span></span></code></pre></div></li></ul><p>其中<code>Comment</code>和<code>Name</code>自定义名字，<code>Exec</code>和<code>Icon</code>选择为实际路径，其余保持默认。</p><ul><li><p>创建启动器图标</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> cp</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> IDEA-2022.1.desktop</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /usr/share/applications/</span></span></code></pre></div></li></ul><!--]--></div><p class="vp-timeline-time">2022-05-21 23:30</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Deepin 卸载自带的 OpenJDK<!--]--></p><!--[--><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">dpkg</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -l</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> |</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> grep</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> openjdk</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 查看openJDK的安装列表</span></span></code></pre></div><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">sudo</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> apt-get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> remove</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> openjdk</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">*</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 卸载</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2022-05-12 21:44</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Linux 下安装 Go 开发环境<!--]--></p><!--[--><p>从官网下载 tar.gz 压缩包，<code>sudo tar -xvf 文件.tar.gz -C /user/local</code>，然后在<code>/usr/local</code>下会有一个<code>go</code>的目录。<br> 官网推荐解压放在<code>usr/local</code>目录下，而macos下安装也是会自动放在此目录下。然后在用户目录下创建一个<code>go</code>目录，用来当作gopath路径。</p><!--]--></div><p class="vp-timeline-time">2022-05-11 12:13</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->解决 .gitignore 文件无法忽略<!--]--></p><!--[--><p><strong>方法一</strong>：清除 Git 本地缓存，使其改变成未 track 状态，然后再提交(使用时最好所有文件已经完全 push 了)：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rm</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -r</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --cached</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> .</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> commit</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -m</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">update .gitignore</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -u</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> main</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 提交到 main 分支</span></span></code></pre></div><p><strong>方法二(推荐)</strong>：在每个clone下来的仓库中手动设置不要检查特定文件的更改情况。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> update-index</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --assume-unchanged</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> PATH</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 在PATH处输入要忽略的文件</span></span></code></pre></div><p><strong>原因</strong>：<code>.gitignore</code>只能忽略那些原来没有被<code>track</code>的文件，如果某些文件已经被纳入了版本管理中，则修改<code>.gitignore</code>是无效的。想要<code>.gitignore</code>起作用，这些文件必须不在暂存区中才可以，<code>.gitignore</code>文件只是忽略没有被<code>taged(cached)</code>文件。对于已经被<code>staged</code>文件，加入<code>.ignore</code>文件时一定要先从<code>staged</code>移除，才可以忽略。</p><p><strong>特别注意</strong>：若在使用<code>.gitignore</code>文件之前，这个要忽略的文件已经被推送到了远程仓，如何删除远程仓的而保留本地的？<br> 此时不可直接使用<code>git rm directory</code>，因为这样会删除本地仓的文件。可以使用<code>git rm -r --cached directory</code>来删除缓冲，然后再<code>commit</code>和<code>push</code>，这样会发现那个要删除的目录或文件，在远程仓中就没有了，之后可以直接使用<code>git add -A</code>来添加修改的内容，上传的文件就会受到<code>.gitignore</code>文件的内容约束。</p><p><strong>额外说明</strong>：Git 管理的目录中，文件大致有 4 种状态：</p><ul><li>Untracked：未跟踪, 此文件在文件夹中, 但并没有加入到 Git 仓库, 不参与版本控制。通过<code>git add</code>使状态变为<code>staged</code>。</li><li>Unmodify：文件已经入库, 未修改, 即版本库中的文件快照内容与文件夹中完全一致。这种类型的文件有两种去处，如果它被修改，而变为<code>Modified</code>；如果使用<code>git rm</code>移出版本库，则成为<code>Untracked</code>文件。</li><li>Modified：文件已修改，仅仅是修改，并没有进行其他的操作。这个文件也有两个去处，通过<code>git add</code>可进入<code>staged</code>暂存状态；如果使用<code>git checkout</code>则丢弃修改，返回到<code>unmodify</code>状态，这个<code>git checkout</code>即从库中取出文件，覆盖当前修改。</li><li>Staged：暂存状态。执行<code>git commit</code>则将修改同步到库中，这时库中的文件和本地文件又变为一致，文件为<code>Unmodify</code>状态。执行<code>git reset HEAD &lt;filename&gt;</code>取消暂存，文件状态为<code>Modified</code>。</li></ul><p>Git 状态<code>untracked</code>和<code>not staged</code>的区别：</p><ul><li><code>untrack</code>表示是新文件，没有被<code>git add</code>过，是未跟踪的意思</li><li><code>not staged</code>表示<code>git add</code>过的文件，即跟踪文件，再次修改后没有再<code>git add</code>，就是没有暂存的意思</li></ul><!--]--></div><p class="vp-timeline-time">2022-05-06 11:23</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Windows 下使用 make 和 gcc 命令<!--]--></p><!--[--><p><strong>方法一</strong>：参考<code>fyne(一款 go 的 gui 框架，其编译需要使用 gcc 命令)</code>中提及的方式，安装 <a href="https://developer.fyne.io/started/" target="_blank" rel="noopener noreferrer">MSYS2</a>。安装完成后将<code>C:\Application\msys64\mingw64\bin\mingw32-make.exe</code> 在当前目录复制一份并重命名为<code>make.exe</code>，然后将此目录添加到环境变量<code>path</code>中，重启生效。</p><p><strong>方法二</strong>：参考<a href="https://blog.51cto.com/u_15262460/2882762" target="_blank" rel="noopener noreferrer">windows10配置make命令</a>，安装<code>MinGW</code>。安装完成后将<code>C:\Application\MinGW\bin\mingw32-make.exe</code>在当前目录复制一份并重命名为<code>make.exe</code>，然后将此目录添加到环境变量<code>path</code>中，重启生效。</p><p>查看命令是否安装成功：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">make</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span></span></code></pre></div><p>在上述完成后，就可以使用<code>make</code>命令执行 Makefile 文件，但若 Makefile 文件中定义了有 shell 语句则依旧不能正确执行。解决方式是使用<code>Git</code>，打开 IDEA 设置，在<code>Tools Terminal</code>中将<code>Shell Path</code>修改为<code>C:\Config\Git\bin\bash.exe</code>，即可在 Git Bash 中执行 shell 命令。</p><p>Windows 下的 cmd 神器 - <a href="https://cmder.net/" target="_blank" rel="noopener noreferrer">cmder</a>，也可以模拟 Linux 环境，具体使用方式自行再探索。</p><!--]--></div><p class="vp-timeline-time">2022-05-05 15:27</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Git 配置全局用户名和邮箱<!--]--></p><!--[--><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user.name</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">mayee</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> user.email</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">maye_e@qq.com</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre></div><p>查看全局配置：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --list</span></span></code></pre></div><p>显示：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">user.name</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=mayee</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">user.email</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">=maye_e@qq.com</span></span></code></pre></div><p>生成 ssh 密钥：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ssh-keygen</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ed25519</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -C</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">deepmi</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> # 使用 ed25519 算法生成秘钥</span></span></code></pre></div><p>连续三次按回车，提示密钥被存储在<code>/Users/用户目录/.ssh/id_ed25519.pub</code>中，然后用<code>cat</code>命令查看密钥。</p><p>若需要使用多个 SSH 密钥对，在<code>Enter file in which to save the key</code>步骤时，输入一个新的文件名称就可以避免覆盖已有的密钥对。</p><p><code>deepmi</code>是生成的 sshkey 的名称，并不约束或要求具体命名为某个邮箱。现网的大部分教程均讲解的使用邮箱生成，其一开始的初衷仅仅是为了便于辨识所以使用了邮箱。</p><p>创建密钥前先确认是否对目录有读写权限：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">icacls</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">C:\Users\maye\.ssh\github\Ma-yeah</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span></code></pre></div><p>需要确认只有自己有访问权限，如果其他用户也有访问权限，需要重置：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">icacls</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">C:\Users\maye\.ssh\github\Ma-yeah</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /reset</span></span></code></pre></div><p>默认情况下，密钥会生成在<code>C:\Users\maye\.ssh\</code>目录下，但是我们可能会在<code>GitHub</code>、<code>Gitee</code>、<code>GitLab</code>等多个平台有多个账号。默认生成秘钥时，如果不指定保存路径，那么就会覆盖之前的密钥。<br> 例如，当我在我的微星电脑<code>micro-star</code>上想为我的 GitHub 账号<code>Ma-yeah</code>生成一个 SSH 密钥，可以按如下步骤操作：</p><ul><li>在<code>C:\Users\maye\.ssh\</code>目录下手动创建目录，最终目录结构为<code>C:\Users\maye\.ssh\github\Ma-yeah</code>；</li><li>打开<code>Git Bash</code>输入<code>ssh-keygen -t rsa -C &quot;micro-star&quot;</code>；</li><li>按一次回车后，会询问你秘钥保存的位置，默认为<code>/c/Users/maye/.ssh/id_rsa</code>，此时修改为<code>/c/Users/maye/.ssh/github/Ma-yeah/id_rsa</code>；</li><li>然后连续回车即可；</li></ul><p>创建完密钥后还需要设置，编辑<code>C:\Users\maye\.ssh\</code>目录下的<code>config</code>文件(注意文件没有后缀，如果文件不存在则创建)，添加如下内容：</p><div class="language-text" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span># GitHub</span></span>
<span class="line"><span>Host github.com</span></span>
<span class="line"><span>  IdentityFile C:\Users\maye\.ssh\Github\Ma-yeah\id_ed25519</span></span>
<span class="line"><span>  User git</span></span>
<span class="line"><span># GitLab</span></span>
<span class="line"><span>Host gitlab.com</span></span>
<span class="line"><span>  IdentityFile C:\Users\maye\.ssh\Gitlab\Mayee\id_ed25519</span></span>
<span class="line"><span>  User git</span></span></code></pre></div><p>之后测试 SSH 连接是否成功：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ssh</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -T</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> git@github.com</span></span></code></pre></div><p>生成 ssh 密钥也可以使用<code>ssh-keygen -t rsa -C &quot;deepmi&quot;</code>，表示使用 RSA 算法生成秘钥。</p><p>如果 SSH 连接的是私有服务器，则在客户机上创建密钥对假设<code>ssh-keygen -t ed25519 -C &quot;client&quot;</code>，假设存储密钥自定义路径是<code>/c/Users/maye/.ssh/trae/ed25519</code>，之后将密钥复制到服务器假设<code>ssh-copy-id -i /c/Users/maye/.ssh/trae/ed25519.pub mayee@192.168.0.1</code>，如果生成密钥时没有修改位置则可以省略掉<code>-i</code>参数，然后就可以通过<code>ssh -i /c/Users/maye/.ssh/trae/ed25519 mayee@192.168.0.1</code>连接到服务器了，如果不想在连接时指定参数，则可以通过上面的方式在<code>config</code>文件中配置连接服务器主机对应的私钥位置。</p><p><strong>说明</strong>：<code>ssh key</code>的类型有四种，分别是<code>dsa</code>、<code>rsa</code>、<code>ecdsa</code>、<code>ed25519</code>。根据数学特性，这四种类型又可以分为两大类，<code>dsa/rsa</code>是一类，<code>ecdsa/ed25519</code>是一类，后者算法更先进。<code>dsa</code>因为安全问题，已不再使用了，<code>ecdsa</code>因为政治原因和技术原因，也不推荐使用，<code>rsa</code>是目前兼容性最好的，应用最广泛的 key 类型，在用<code>ssh-keygen</code>工具生成 key 的时候，默认使用的也是这种类型。不过在生成 key 时，如果指定的 key size 太小的话，也是有安全问题的，推荐 key size 是 3072 或更大。<code>ed25519</code>是目前最安全、加解密速度最快的 key 类型，由于其数学特性，它的 key 的长度比<code>rsa</code>小很多，优先推荐使用。它目前唯一的问题就是兼容性，即在旧版本的 SSH 工具集中可能无法使用。不过据我目前测试，还没有发现此类问题。<br> 因此，优先选择<code>ed25519</code>，否则选择<code>rsa</code>。</p><p>以下是原文：</p><blockquote><p>OpenSSH supports several signing algorithms (for authentication keys) which can be divided in two groups depending on the mathematical properties they exploit:</p><p>DSA and RSA, which rely on the practical difficulty of factoring the product of two large prime numbers, ECDSA and Ed25519, which rely on the elliptic curve discrete logarithm problem. (example)Elliptic curve cryptography (ECC) algorithms are a more recent addition to public key cryptosystems. One of their main advantages is their ability to provide the same level of security with smaller keys, which makes for less computationally intensive operations (i.e. faster key creation, encryption and decryption) and reduced storage and transmission requirements.</p><p>OpenSSH 7.0 deprecated and disabled support for DSA keys due to discovered vulnerabilities, therefore the choice of cryptosystem lies within RSA or one of the two types of ECC.</p><p>RSA keys will give you the greatest portability, while #Ed25519 will give you the best security but requires recent versions of client &amp; server[2]. #ECDSA is likely more compatible than Ed25519 (though still less than RSA), but suspicions exist about its security (see below).</p></blockquote><!--]--></div><p class="vp-timeline-time">2022-05-04 15:51</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Docker-Compose 重建容器<!--]--></p><!--[--><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --force-recreate</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2022-04-29 11:50</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Fork 项目开发<!--]--></p><!--[--><p>当 fork 了别人的项目后，进行二次开发，源项目有提交后如何保持更新呢？<br> 例如，源仓库为：https://github.com/halo-dev/halo.git, fork 到我的仓库后地址为：https://github.com/maye-e/halo.git。<br> 之后在我的仓库中创建 dev 开发分支，stable 稳定分支，可以 release。master 分支不动，保持和源仓库进行同步。<br> 将项目从我的仓库中拉取到本地，然后如下操作：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 1.查看远程仓库：</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> remote</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 显示：</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  https://github.com/maye-e/halo.git</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (fetch)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  https://github.com/maye-e/halo.git</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (push)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 2.设置 upstream 上游仓库(源项目地址)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> remote</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> add</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> upstream</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://github.com/halo-dev/halo.git</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 3.再次查看远程仓库：</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> remote</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -v</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 显示：</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  https://github.com/maye-e/halo.git</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (fetch)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">  https://github.com/maye-e/halo.git</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (push)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">upstream</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        https://github.com/halo-dev/halo.git</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (fetch)</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">upstream</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">        https://github.com/halo-dev/halo.git</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> (push)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 4.同步上游源仓库的 master 分支更改到本地(本地 master 分支，非我的远程仓库)</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">## 4.1.拉取更新的 branches 和 commits</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> fetch</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> upstream</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">## 4.2.切S本地分支</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> checkout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">## 4.3.合并</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> merge</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> upstream/master</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 4.1 ~ 4.3的步骤也可以通过一条语句完成</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> pull</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> upstream</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span></span></code></pre></div><p>此时，就可以任意进行合并分支了。若要将本地代码 push 到远程仓库：</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 切到要推送的分支，如 master</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">checkout</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 推送到远程仓库。origin master 表示推送到远程仓库的 master 分支，如果分支不存在则自动创建</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> push</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> origin</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> master</span></span></code></pre></div><p>另外，如果需要将修改合并到源项目，需要在我的仓库中提交 Pull Request。</p><!--]--></div><p class="vp-timeline-time">2022-04-16 03:13</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Docker 常用命令<!--]--></p><!--[--><table><thead><tr><th style="text-align:center;">命令</th><th style="text-align:center;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">docker kill $(docker ps -a -q)</td><td style="text-align:center;">杀死所有正在运行的容器</td></tr><tr><td style="text-align:center;">docker rm $(docker ps -a -q)</td><td style="text-align:center;">删除所有已经停止的容器</td></tr><tr><td style="text-align:center;">docker images</td><td style="text-align:center;">查看本地镜像</td></tr><tr><td style="text-align:center;">docker ps</td><td style="text-align:center;">查看本地容器</td></tr><tr><td style="text-align:center;">docker build -t <code>name</code>:<code>tag</code> <code>Dockerfile路径</code></td><td style="text-align:center;">创建镜像</td></tr><tr><td style="text-align:center;">docker exec-it <code>IMAGE ID</code>或者<code>NAME</code> /bin/bash</td><td style="text-align:center;">进入容器</td></tr><tr><td style="text-align:center;">docker stop <code>CONTAINER ID</code>或者<code>NAMES</code></td><td style="text-align:center;">关闭容器</td></tr><tr><td style="text-align:center;">docker start <code>CONTAINER ID</code>或者<code>NAMES</code></td><td style="text-align:center;">重新启动关闭的容器</td></tr><tr><td style="text-align:center;">docker rm <code>CONTAINER ID</code>或者<code>NAMES</code></td><td style="text-align:center;">移除本地容器</td></tr></tbody></table><!--]--></div><p class="vp-timeline-time">2022-02-19 13:43</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->npm 设置淘宝代理<!--]--></p><!--[--><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-bash"><span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 永久设置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> registry</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http://registry.npm.taobao.org</span></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"># 查看设置</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> get</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> registry</span></span></code></pre></div><!--]--></div><p class="vp-timeline-time">2021-10-26 01:37</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Linux 文件目录权限<!--]--></p><!--[--><p>先看一个例子：<code>drwxrwxrwx</code>、<code>-rwxrwxrwx</code>。<br> 文件权限分别对应 4 个部分: [文件或文件夹] [owner权限] [group权限] [others权限]。 因此上述例子表示为: [d] [rwx] [rwx] [rwx] 、[-] [rwx] [rwx] [rwx]</p><ul><li>[-] 表示文件；</li><li>[d] 表示文件夹，即 directory；</li></ul><p>[rwx] 分别表示拥有的权限：</p><ul><li>r 可读，read。如果是目录表示有权限执行 ls 命令；</li><li>w 可写，write。如果是目录表示有权限创建目录；</li><li>x 可执行，execute。表示有权限执行 ls -l 命令；</li></ul><p>拥有该项权限为 1，没有权限为 0。<br><code>drwxrwxrwx</code> 表示为一个目录，对应权限值为 0777。0 标识这是 8 进制数(逢 8 进 1)。777 转为 2 进制为 111111111，则在 owner、group、others 下均有可读、可写、可执行权限；<br><code>-rwxrwxrwx</code> 表示为一个文件，对应权限值为 0777。0 标识这是 8 进制数(逢 8 进 1)。777 转为 2 进制为 111111111，在 owner、group、others 下均有可读、可写、可执行权限。</p><!--]--></div><p class="vp-timeline-time">2021-11-22 17:46</p></div></div><div class="vp-timeline-item card info line-dotted placement-left" style=""><div class="vp-timeline-line"><span class="vp-timeline-point"><!--[--><!----><!--]--></span></div><div class="vp-timeline-container"><div class="vp-timeline-content"><p class="vp-timeline-title"><!--[-->Pinpoint部署<!--]--></p><!--[--><p>部署需要资源：服务器需安装 Docker Compose。当前测试部署的服务器 ip 为 192.168.30.73。</p><ul><li>在 GitHub 上 clone <a href="https://github.com/pinpoint-apm/pinpoint-docker" target="_blank" rel="noopener noreferrer">pinpoint-docker</a> 项目到本地，得到<code>pinpoint-docker-master.zip</code>压缩包。</li><li>解压后进入到<code>pinpoint-docker-master</code>目录中，将<code>docker-compose.yml</code>和<code>.env</code>两个文件拷贝一份出来。</li><li>打开<code>.env</code>文件，将第一行 PINPOINT_VERSION=2.2.1 修改为 2.2.0，保存文件；再打开<code>docker-compose.yml</code>文件，其中 services 节点下包含 pinpoint-hbase、pinpoint-mysql、pinpoint-web、pinpoint-collector、pinpoint-quickstart、pinpoint-agent 等子节点。首先可以删除掉 pinpoint-quickstart 和 pinpoint-agent 这两个节点，接着再将 pinpoint-hbase、pinpoint-mysql、pinpoint-web、pinpoint-collector 这 4 个节点下的 build 节点删除，保存文件。</li><li>将修改后的<code>.env</code>和<code>docker-compose.yml</code>文件上传至服务器，然后执行命令：docker-compose pull &amp; docker-compose up -d，等待自动拉取镜像，启动容器，用时3分钟左右。</li><li>在 GitHub 上访问 pinpoint 的 <a href="https://github.com/pinpoint-apm/pinpoint/releases" target="_blank" rel="noopener noreferrer">release</a> 页，下载 2.2.0 release notes 下的 pinpoint-agent-2.2.0.tar.gz 文件并解压，进入到 pinpoint-agent-2.2.0\profiles\release 目录下，打开<code>pinpoint.config</code>文件，搜索 &quot;.ip&quot; 将127.0.0.1替换为服务器真实 ip 192.168.30.73；再搜索 &quot;profiler.sampling.rate&quot; 将 20 修改为 1。</li><li>打开浏览器，访问 192.168.30.73:8079 即可。</li><li>java -jar 启动服务时，加上如下 jvm 参数：</li></ul><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code class="language-text"><span class="line"><span>-javaagent:/home/pinpoint/agent/pinpoint-bootstrap-1.8.0.jar </span></span>
<span class="line"><span>-Dpinpoint.agentId=(要全局唯一建议用hostname，部署多个jvm的话加前缀)</span></span>
<span class="line"><span>-Dpinpoint.applicationName= 设置项目的名称(如果同一项目部署两台实例,这两台的参数应该一致)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><p class="vp-timeline-time">2021-01-30 16:02</p></div></div><!--]--></div></div></div><!----><!----><div class="vp-doc-copyright" data-v-5e118bb0><h2 id="doc-copyright" tabindex="-1" class="vp-doc-header" data-v-53b95284><a href="#doc-copyright" class="header-anchor" data-v-53b95284><span data-v-53b95284><!--[-->版权所有<!--]--></span></a></h2><div class="hint-container tip copyright-container" data-v-79711e76><p data-v-79711e76><span data-v-79711e76>版权归属：</span><a class="vp-link link no-icon" href="https://github.com/Mayee" target="_blank" rel="noreferrer" data-v-79711e76><!--[-->Mayee<!--]--><!----></a></p><!----><p data-v-79711e76><span data-v-79711e76>许可证：</span><a class="vp-link link no-icon" href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="noreferrer" data-v-79711e76><!--[-->署名 4.0 国际 (CC-BY-4.0)<!--]--><!----></a><!--[--><span class="vpi-license-cc" data-v-79711e76></span><span class="vpi-license-by" data-v-79711e76></span><!--]--></p></div></div></div></main><footer class="vp-doc-footer" data-v-5e118bb0 data-v-3078abbd><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-3078abbd><span class="contributors-label" data-v-3078abbd>贡献者: </span><span class="contributors-info" data-v-3078abbd><!--[--><!--[--><span class="contributor" data-v-3078abbd>Mayee</span><!----><!--]--><!--]--></span></div><!----></footer><!----><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button type="button" class="vp-back-to-top" aria-label="back to top" data-v-dd2ea341 style="display:none;" data-v-d4e26b45><span class="percent" data-allow-mismatch data-v-d4e26b45>0%</span><span class="show icon vpi-back-to-top" data-v-d4e26b45></span><svg aria-hidden="true" data-v-d4e26b45><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-d4e26b45></circle></svg></button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="sign down" class="vp-sign-down" aria-hidden="true" data-v-dd2ea341 style="display:none;" data-v-2a7cf2ea><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" data-v-2a7cf2ea><path d="m19 11l-7 6l-7-6" data-v-2a7cf2ea></path><path d="m19 5l-7 6l-7-6" opacity="0.6" data-v-2a7cf2ea></path></g></svg><footer class="vp-footer" vp-footer data-v-dd2ea341 data-v-b55ba299><!--[--><div class="container" data-v-b55ba299><!----><p class="copyright" data-v-b55ba299>©2021 Mayee</p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-B_sKV6fk.js" defer></script></body></html>