---
title: OpenWrtç³»ç»Ÿä½¿ç”¨
tags:
  - R2S
  - OpenWrt
categories:
  - ç½‘ç»œ
createTime: 2025/04/13 02:17:22
permalink: /article/0be86xd9/
---

## å‰è¨€

é—²è¨€å°‘å™ï¼Œæ€»è€Œè¨€ä¹‹å°±æ˜¯åˆæŠ˜è…¾äº† R2Sï¼ŒæŠŠä¹‹å‰ç”¨çš„åŸæœ¬ ImmortalWrt æ¢æˆäº† YAOF çš„ OpenWrt ç³»ç»Ÿï¼ŒåŸå› æ˜¯é›†æˆçš„æ’ä»¶å¤šï¼Œå¥½ç”¨çœå¿ƒã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼Œè®°å½•ä¸‹æœ¬æ¬¡æŠ˜è…¾è¿‡ç¨‹ä¸­ç¢°åˆ°çš„éº»çƒ¦äº‹ã€‚

## 1. å›ºä»¶åˆ·å…¥

è¿™é‡Œé€‰æ‹©çš„å›ºä»¶ç‰ˆæœ¬æ˜¯[23.05.5-sfs](https://github.com/QiuSimons/YAOF/releases/tag/23.05.5)ï¼Œå› ä¸ºè¿™æ˜¯æœ€åä¸€ä¸ªæ”¯æŒ docker çš„ç‰ˆæœ¬ã€‚ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªï¼Œè‡ªå·±åŠ¨æ‰‹å®‰è£…ä¸é¦™å—ï¼Ÿä¸é¦™ï¼Œæœ‰ç‚¹éº»çƒ¦ï¼Œå› ä¸ºè¿™ä¸ªå›ºä»¶ç”¨çš„æºä¸­çš„è½¯ä»¶å’Œ ImmortalWrt ç”¨çš„ç›¸æ¯”æœ‰æŒºå¤šæ²¡æœ‰çš„ã€‚å½“ç„¶å¯ä»¥æ›¿æ¢æºï¼Œæˆ–è€…åŠ¨æ‰‹å»ç½‘ä¸Šæ‰¾å„ç§`luci-*-all.ipk`çš„æ’ä»¶ä¸Šä¼ å®‰è£…ï¼Œä½†æ˜¯è¯´äº†éº»çƒ¦ï¼Œåšå‡æ³•æ¯”åšåŠ æ³•å®¹æ˜“ï¼Œæ—¢ç„¶æœ‰é›†æˆå¥½çš„ç”¨å°±æ˜¯äº†ï¼Œä¸€å‘³çš„è¿½æ±‚ç³»ç»Ÿç‰ˆæœ¬æ²¡æ„ä¹‰ï¼Œåªè¦ç”¨èµ·æ¥ç¨³å®šï¼Œè®©äººçœå¿ƒï¼Œé‚£å°±æ˜¯å¥½çš„ã€‚  

å›ºä»¶åˆ·å†™æ³¨æ„äº‹é¡¹ï¼š

- åˆ·å…¥å‰ï¼šè¿›è¡Œæ‰©å®¹ï¼Œä¿è¯ç»™è½¯ä»¶å®‰è£…é¢„ç•™å……è¶³ç©ºé—´ï¼Œä¸ç”¨å¤ªå¤šï¼Œå¢åŠ  1G è¶³ä»¥ã€‚[æ‰©å®¹æ–¹å¼](/article/tgd9dxlo/#_2-1-å®‰è£…å‰æ‰©å®¹-æ¨è)ï¼›
- åˆ·å…¥ä¸­ï¼šè·Ÿä»¥å‰ä¸€æ ·ï¼›
- åˆ·å…¥åï¼šå¯åŠ¨è¿›å…¥ç³»ç»Ÿåï¼Œä¸è¦å¯åŠ¨ dockerï¼Œç£ç›˜åˆ†ä¸ªåŒºç»™ dockerï¼Œè¿™é‡Œæˆ‘åˆ†äº†6G ç©ºé—´è¶³å¤Ÿç”¨äº†ã€‚ç„¶åæŒ‚è½½åˆ†åŒºåˆ°`/opt/docker`ï¼›

æœªæåŠçš„æ“ä½œç…§æ—§å³å¯ã€‚  

é¡ºä¾¿æä¸€ä¸‹è¿™ä¸ªå›ºä»¶å†…ç½®çš„è½¯ä»¶æºï¼š

```text :no-line-numbers
src/gz openwrt_core https://mirrors.pku.edu.cn/openwrt/releases/23.05.5/targets/rockchip/armv8/packages
src/gz openwrt_base https://mirrors.pku.edu.cn/openwrt/releases/23.05.5/packages/aarch64_generic/base
src/gz openwrt_luci https://mirrors.pku.edu.cn/openwrt/releases/23.05.5/packages/aarch64_generic/luci
src/gz openwrt_packages https://mirrors.pku.edu.cn/openwrt/releases/23.05.5/packages/aarch64_generic/packages
src/gz openwrt_routing https://mirrors.pku.edu.cn/openwrt/releases/23.05.5/packages/aarch64_generic/routing
src/gz openwrt_telephony https://mirrors.pku.edu.cn/openwrt/releases/23.05.5/packages/aarch64_generic/telephony
```

å¦‚æœè¦æ›¿æ¢ä¸º ImmortalWrt çš„è½¯ä»¶æºï¼Œåªéœ€è¦æŒ‰ç…§ä¸Šè¿°æ ¼å¼ï¼ŒæŠŠåœ°å€æ¢æˆ`https://downloads.immortalwrt.org/`ã€‚ä½†æ˜¯æ¢æºä¹‹åå¯èƒ½ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„é—®é¢˜ï¼Œæ¯”å¦‚åŸå›ºä»¶çš„æ’ä»¶ä½¿ç”¨çš„ä¾èµ–åœ¨åŸæ¥çš„æºä¸­æ‰¾å¾—åˆ°ï¼Œä½†æ˜¯åœ¨æ–°æºå¯èƒ½æ‰¾ä¸åˆ°æˆ–è€…ç‰ˆæœ¬ä¸å¯ç”¨ã€‚æ“ä½œæœ‰é£é™©ï¼Œæ¢æºéœ€è°¨æ…ã€‚

**Tip**ï¼šsfs çš„å›ºä»¶èƒ½å¤Ÿé‡ç½®ï¼Œå½“ç³»ç»Ÿæ— æ³•æ­£å¸¸å¯åŠ¨æ—¶ï¼Œä¸è¦ç«‹é©¬åˆ·æœºï¼Œå…ˆå°è¯•æ–­ç”µåæ’æ‹” TF å¡ï¼Œç„¶åé‡æ–°ä¸Šç”µé•¿æŒ‰`reset`é”®ï¼Œä¹‹åè§‚å¯Ÿ`sys`æŒ‡ç¤ºç¯çš„å˜åŒ–ã€‚å½“çº¢ç¯å¿«é€Ÿé—ªçƒè¡¨ç¤ºæ­£åœ¨é‡ç½®ä¸­ï¼Œæ…¢é—ªè¡¨ç¤ºç³»ç»Ÿæ­£å¸¸å¯åŠ¨ä¸­ï¼Œé•¿äº®è¡¨ç¤ºç³»ç»Ÿæ­£å¸¸è¿è¡Œä¸­ã€‚é‡ç½®å›ºä»¶åè™½ç„¶éœ€è¦é‡æ–°è®¾ç½®ç³»ç»Ÿï¼Œä½†æ˜¯ TF å¡ä¸Šå­˜å‚¨çš„æ–‡ä»¶ä¸ä¼šä¸¢å¤±ã€‚

## 2. å®‰è£…æ’ä»¶

### 2.1 Tailscale

`Tailscale`çš„ä½œç”¨å°±ä¸å¿…å¤šè¯´äº†ï¼Œå†…ç½‘ç©¿é€ç¥å™¨ã€‚ä¸ä¹‹é½åçš„è¿˜æœ‰`Zerotier`ï¼Œä¸ºå•¥ä¸ç”¨è¿™ä¸ªï¼Ÿå› ä¸ºè¿™ä¸ªè®¾ç½®èµ·æ¥è´¹è€é¼»å­åŠ²äº†ï¼Œå¾ˆæŠ˜è…¾ï¼Œè€Œä¸”å…è´¹è®¡åˆ’åªæ”¯æŒæœ€å¤š3ä¸ªç½‘ç»œâ•10ä¸ªè®¾å¤‡ï¼ŒæŒ‰è¯´å·®ä¸å¤šå¤Ÿç”¨äº†ï¼Œä½†æ˜¯æ„Ÿè§‰æ‰è¥Ÿè§è‚˜ã€‚ä½†`Tailscale`çš„å®‰è£…å°±éå¸¸æ–¹ä¾¿ï¼Œå¹¶ä¸”å…è´¹è®¡åˆ’æ”¯æŒ3ä¸ªç”¨æˆ·â•100ä¸ªè®¾å¤‡ï¼Œå¤§æ°”å¤šäº†ï¼Œç”¨ä¸å®Œï¼Œæ ¹æœ¬ç”¨ä¸å®ŒğŸ˜„ã€‚  

åœ¨å®‰è£…æ’ä»¶å‰ï¼Œå…ˆåˆ°è½¯ä»¶åŒ…ä¸­å®‰è£…`iptables-nft`ï¼Œè¿™ä¸ªæ˜¯å¿…è¦çš„ä¾èµ–ã€‚ä¹‹åä¸Š[luci-app-tailscale](https://github.com/asvow/luci-app-tailscale/releases)ä¸‹è½½æœ€æ–°ç‰ˆå°±å®Œäº‹ï¼Œè®°å¾—ä¸‹è½½çš„æ˜¯`luci-app-tailscale_*_all.ipk`ï¼Œç„¶åä¸Šä¼ å®‰è£…å³å¯ï¼Œå¯åŠ¨åä¼šè‡ªåŠ¨è®¾ç½®å¥½ä¸Šç½‘æ¥å£ä»¥åŠé˜²ç«å¢™ã€‚å…¥å£åœ¨ OpenWrt ç³»ç»Ÿçš„`æœåŠ¡`ä¸‹é¢ã€‚  

`Tailscale`çš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œç™»å½•äº†ç›¸åŒè´¦å·çš„è®¾å¤‡å°±èƒ½äº’ç›¸è®¿é—®ã€‚è¿™é‡Œæœ‰ä¸ªå…³é”®çš„åœ°æ–¹ï¼Œå½“å®‰è£…äº†`Tailscale`çš„è½¯è·¯ç”±ä¸ºä¸»è·¯ç”±æ¨¡å¼æ—¶ï¼Œåœ¨ OpenWrt çš„ Tailscale çš„`é«˜çº§è®¾ç½®`ä¸‹æŠŠ**æš´éœ²å­ç½‘**é…ç½®å¥½ï¼Œè¿™æ ·å†…ç½‘ä¸­çš„æ‰€æœ‰è®¾å¤‡å³ä½¿æ²¡æœ‰å®‰è£…`Tailscale`ä¹Ÿå¯ä»¥è¢«è®¿é—®åˆ°ï¼Œåœ¨å¤–ç½‘çš„è®¾å¤‡åªéœ€è¦æ‰“å¼€`Tailscale`å°±èƒ½åƒåœ¨å†…ç½‘ä¸­ä¸€æ ·è®¿é—®ã€‚  

**æ³¨æ„**ï¼šæ¯ä¸ªè®¾å¤‡ç™»å½•åæ˜¯æœ‰æ—¶æ•ˆçš„ï¼Œé»˜è®¤æœ‰æ•ˆæœŸ 3 ä¸ªæœˆï¼Œå¯ä»¥åœ¨[æ§åˆ¶å°](https://login.tailscale.com/admin/settings/device-management)è°ƒæ•´ã€‚å¦‚æœä½ æƒ³ä¸å¤±æ•ˆï¼Œå°±åœ¨[æ§åˆ¶å°](https://login.tailscale.com/admin/machines)é€‰ä¸­è®¾å¤‡åç‚¹å‡»`Disable key expiry`ã€‚  

å†å°±æ˜¯ï¼Œå½“ä½ æƒ³è¦ä»–äººåŠ å…¥ä½ çš„`tailnet`ï¼Œæœ‰ä¸‰ç§é€‰æ‹©ï¼š

1. ç™»å½•åˆ° Tailscale çš„[æ§åˆ¶å°](https://login.tailscale.com/admin/settings/keys)é…ç½®ä¸€ä¸ª`Auth keys`ï¼Œä»–äººä½¿ç”¨ä½ è¿™ä¸ª Auth keys ç™»å½•ï¼Œå³å¯å°†ä»–çš„è®¾å¤‡åŠ å…¥åˆ°ä½ çš„`tailnet`ä¸­ã€‚ä¼˜ç‚¹æ˜¯ï¼Œä¸ç”¨æ³„éœ²ä½ çš„å¯†ç ï¼›ç¼ºç‚¹æ˜¯ï¼ŒAuth keys æœ€å¤§æœ‰æ•ˆæœŸä¸º 90 å¤©ã€‚
2. ä»–äººæ­£å¸¸ç™»å½•å…¶è´¦å·ï¼Œä½ [é‚€è¯·](https://login.tailscale.com/admin/users)å¯¹æ–¹çš„è´¦å·åˆ°ä½ çš„`tailnet`ä¸­ã€‚é‚€è¯·æˆåŠŸåï¼Œéœ€è¦å¯¹æ–¹é‡æ–°ç™»å½•å…¶è´¦å·ï¼Œæ­¤æ—¶å°±èƒ½çœ‹åˆ°æœ‰è‹¥å¹²é€‰é¡¹ï¼Œè¦æ±‚å…¶é€‰æ‹©ä¸€ä¸ª`tailnet`åŠ å…¥ï¼Œé‚£ä¹ˆé€‰æ‹©ä½ çš„å³å¯ã€‚ä¼˜ç‚¹æ˜¯ï¼Œæ— æœ‰æœ‰æ•ˆæœŸé™åˆ¶ï¼›ç¼ºç‚¹æ˜¯ï¼Œå ç”¨ä¸€ä¸ªç”¨æˆ·çš„åé¢ã€‚
3. ä»–äººæ­£å¸¸ç™»å½•å…¶è´¦å·ï¼Œä½ åœ¨ Tailscale çš„[æ§åˆ¶å°](https://login.tailscale.com/admin/machines)é€‰æ‹©ä¸€ä¸ªè®¾å¤‡åˆ†äº«ç»™å¯¹æ–¹ï¼Œå¯¹æ–¹æ¥å—è¦æ±‚åï¼Œä½ çš„è®¾å¤‡å°±å‡ºç°åœ¨äº†å¯¹æ–¹çš„`tailnet`ä¸­ã€‚

ä¸Šé¢ä¸‰ç§æ–¹å¼çš„ä¸åŒç‚¹ï¼š

- ç¬¬ 1 ç§ï¼Œæ˜¯ä»–çš„è®¾å¤‡åŠ å…¥åˆ°ä½ çš„ç½‘ç»œä¸­ï¼Œä¼šå ç”¨ä½ çš„è®¾å¤‡é™é¢ï¼Œé»˜è®¤å¯ä»¥è®¿é—®ä½ è´¦å·ä¸‹çš„æ‰€æœ‰è®¾å¤‡ï¼ŒåŒ…æ‹¬æš´éœ²å‡ºçš„å­ç½‘ï¼Œä½ ä¹Ÿå¯ä»¥è®¿é—®ä»–çš„è®¾å¤‡ï¼Œå¯ä»¥ç¼–å†™`ACL`æ§åˆ¶æƒé™ã€‚ç”¨çš„æ˜¯ä½ çš„è´¦å·ï¼›
- ç¬¬ 2 ç§ï¼Œæ˜¯ä»–çš„è®¾å¤‡åŠ å…¥åˆ°ä½ çš„ç½‘ç»œä¸­ï¼Œä¼šå ç”¨ä½ çš„è®¾å¤‡é™é¢ï¼Œå¹¶ä¸”ä¼šå ç”¨ä½ çš„ç”¨æˆ·é™é¢ï¼Œé»˜è®¤å¯ä»¥è®¿é—®ä½ è´¦å·ä¸‹çš„æ‰€æœ‰è®¾å¤‡ï¼ŒåŒ…æ‹¬æš´éœ²å‡ºçš„å­ç½‘ï¼Œä½ ä¹Ÿå¯ä»¥è®¿é—®ä»–çš„è®¾å¤‡ï¼Œå¯ä»¥ç¼–å†™`ACL`æ§åˆ¶æƒé™ã€‚ç”¨çš„æ˜¯ä»–çš„è´¦å·ï¼›
- ç¬¬ 3 ç§ï¼Œæ˜¯ä½ çš„è®¾å¤‡åŠ å…¥ä»–çš„ç½‘ç»œä¸­ï¼Œä¼šå ç”¨ä»–çš„è®¾å¤‡é™é¢ï¼Œä»–åªèƒ½è®¿é—®ä½ åˆ†äº«çš„è¿™ä¸ªè®¾å¤‡ï¼Œå³ä½¿æ­¤è®¾å¤‡ä¸‹æœ‰å­ç½‘ä»–ä¹Ÿä¸èƒ½è®¿é—®ï¼Œä½†ä½ åˆ†äº«çš„è¿™ä¸ªè®¾å¤‡å¹¶ä¸èƒ½è®¿é—®ä»–çš„ç½‘ç»œï¼Œç”±äºä»–å¹¶ä¸åœ¨ä½ çš„ç½‘ç»œä¸­ï¼Œæ‰€ä»¥ä½ æ— éœ€ä¹Ÿä¸èƒ½ç¼–å†™`ACL`æ§åˆ¶æƒé™ã€‚ç”¨çš„æ˜¯ä»–è´¦å·ï¼›

ç†Ÿæ‚‰ä»¥ä¸ŠåŒºåˆ«ï¼Œé€‰æ‹©åˆé€‚çš„åˆ†äº«ç­–ç•¥ã€‚

**æ³¨æ„**ï¼šTailscale é€šè¿‡ IPv6 ç›´è¿é€Ÿåº¦å°±æ¯”è¾ƒå¿«ï¼Œèƒ½ä¿è¯æ­£å¸¸ä½¿ç”¨ï¼Œä½†å¦‚æœä»¥ IPv4 è¿æ¥ï¼Œè‹¥å½“å‰æ²¡æœ‰å…¬ç½‘ä¸”ç½‘ç»œ NAT å±‚æ•°è¿‡å¤šï¼Œåˆ™æ— æ³•ç›´è¿ï¼Œå°±ä¼šèµ°ä¸­è½¬æœåŠ¡å™¨ï¼Œä½ æ‡‚çš„ï¼Œé‚£å°±éå¸¸æ…¢äº†ï¼Œæ…¢åˆ°æ— æ³•ä½¿ç”¨ã€‚  
æ‰€ä»¥ï¼Œä¸€ç§æ–¹å¼å°±æ˜¯å®¶åº­å†…ç½‘æ‹¨å·æ—¶è·å– IPv6 åœ°å€ï¼Œè¿è¥å•†ä¸€èˆ¬ä¼šä¸‹å‘ï¼Œå¦‚æœæ²¡æœ‰é‚£å°±æ²¡å¾—ç©ï¼Œè€Œæ‰‹æœºé€šè¿‡èœ‚çªæ•°æ®ä¸Šç½‘ä¸€èˆ¬ä¹Ÿéƒ½æ˜¯æœ‰ IPv6 çš„ï¼Œä¸¤ç«¯éƒ½æ˜¯ IPv6 å°±å¯ä»¥ç›´è¿ï¼›å¦ä¸€ç§æ–¹å¼å°±æ˜¯è‡ªå»º Derp ä¸­ç»§æœåŠ¡å™¨ï¼Œä½†é‚£å°±éœ€è¦æœ‰ä¸€å°å…·æœ‰å…¬ç½‘ IP çš„æœåŠ¡å™¨ï¼Œä¸€èˆ¬æ˜¯ä¹°äº‘æœåŠ¡å™¨ï¼Œè¦é’±çš„æ–¹æ¡ˆä¸åœ¨ç™½å«–å…šçš„é€‰æ‹©èŒƒå›´ã€‚

### 2.2 Navidrome

[å®˜ç½‘](https://www.navidrome.org/)ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä»¥æä¾›éŸ³ä¹åˆ†äº«çš„æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è½¯è·¯ç”±ä¸Šè¿è¡Œå®ƒæ¥æ­å»ºè‡ªå·±çš„éŸ³ä¹ç§æœï¼Œé…åˆå†…ç½‘ç©¿é€åå°±å¯ä»¥æ— é™åˆ¶å¬éŸ³ä¹äº†ã€‚  
**æ³¨æ„**ï¼šè¿™ä»…ä»…æ˜¯ä¸€ä¸ªå¯ä»¥æä¾›éŸ³ä¹åˆ†äº«çš„æœåŠ¡ï¼Œå®ƒæœ¬èº«æ˜¯æ²¡æœ‰ä»»ä½•éŸ³ä¹çš„ï¼Œæ‰€æœ‰çš„éŸ³ä¹å†…å®¹è¿˜æ˜¯å¾—è‡ªå·±å»æå®šï¼Œä¸€åŠ³æ°¸é€¸ã€‚  

ä¸‹è½½æ’ä»¶[luci-app-navidrome](https://github.com/tty228/luci-app-navidrome/releases)å¹¶ä¸Šä¼ å®‰è£…ï¼Œå…¥å£åœ¨ OpenWrt ç³»ç»Ÿçš„`æœåŠ¡`ä¸‹é¢ã€‚  
å®‰è£…å®Œæˆåå…ˆä¸è¦æ€¥ç€å¯åŠ¨ï¼Œå»`ç£ç›˜ç®¡ç†`åˆ†ä¸€ä¸ªåŒºç”¨æ¥å­˜æ”¾éŸ³ä¹ã€‚åˆ†å¤šå¤§çœ‹ä¸ªäººæƒ…å†µï¼Œæˆ‘æ²¡æœ‰å…¶ä»–éœ€æ±‚ï¼ŒæŠŠå‰©ä½™æ‰€æœ‰ç©ºé—´éƒ½åˆ†å‡ºæ¥äº†ã€‚åˆ†åŒºå®Œåè¿›è¡ŒæŒ‚è½½ï¼ŒæŒ‚è½½è·¯å¾„éšæ„ï¼Œæˆ‘è¿™é‡Œæ˜¯`/opt/navidrome`ã€‚  
åœ¨å¯åŠ¨æ’ä»¶ä¹‹å‰ï¼Œè®¾ç½®å¥½æ’ä»¶çš„å„ç§ç›®å½•ï¼Œå¹¶ç¡®ä¿è¿™äº›ç›®å½•éƒ½å­˜åœ¨ï¼Œå¦åˆ™å¯åŠ¨ä¼šå¤±è´¥ï¼Œä¹‹åæ­£å¸¸å¯åŠ¨æµè§ˆå™¨è®¿é—®æ“ä½œå³å¯ã€‚

### 2.3 Samba

Samba åè®®å¯ä»¥ç”¨æ¥åœ¨è®¾å¤‡ä¹‹é—´å…±äº«æ–‡ä»¶ï¼ŒWindows å’Œ Linux ç³»ç»Ÿéƒ½æ”¯æŒï¼Œä¸è¿‡éœ€è¦åšä¸€äº›è®¾ç½®æ‰èƒ½å¯ç”¨ã€‚  

:::: card title="Linux" icon="simple-icons:linux"
::: steps

1. å®‰è£… Samba

   åœ¨è½¯ä»¶åŒ…ä¸­æœç´¢ä¸‹è½½`shadow-useradd` [+useradd]ã€`luci-app-samba4` [+samba]å’Œ`luci-i18n-samba4-zh-cn` [+i18n-samba]ï¼Œè‹¥å·²å®‰è£…åˆ™å¿½ç•¥ã€‚å®‰è£…å®Œæˆåï¼Œå…¥å£åœ¨`æœåŠ¡`->`ç½‘ç»œå…±äº«`ã€‚
   [+useradd]: Linuxä¸‹åˆ›å»ºç”¨æˆ·çš„å·¥å…·
   [+samba]: åŸºäºLuciçš„sambaæœåŠ¡å™¨
   [+i18n-samba]: luci-app-samba4çš„ç®€ä½“ä¸­æ–‡åŒ…

2. åˆ›å»º Samba ç”¨æˆ·

   ```bash :no-line-numbers
   useradd samba # æ·»åŠ åä¸º samba çš„ç”¨æˆ·
   smbpasswd -a samba # ä¸ºç”¨æˆ· samba åˆ›å»º smb æœåŠ¡çš„å¯†ç 
   mkdir -p /opt/navidrome/music # åˆ›å»ºä¸€ä¸ªç›®å½•ç”¨äºå…±äº«ï¼ˆå·²å­˜åœ¨åˆ™å¿½ç•¥ï¼‰
   # ä½¿ç”¨æˆ· samba è·å¾—ç›®å½•æƒé™ã€‚è¿™ä¸€æ­¥å¾ˆé‡è¦ï¼Œå¦åˆ™å½“ä½¿ç”¨ Samba å®¢æˆ·ç«¯è¿æ¥æ—¶ä¼šæç¤ºï¼šæ²¡æœ‰æƒé™ã€‚
   chown -R samba:samba /opt/navidrome/music # æˆ–è€…æ‰§è¡Œ chmod -R 777 /opt/navidrome/music
   
   # å¦‚æœåˆ›å»ºçš„ samba ç”¨æˆ·ä¸æƒ³ç”¨äº†
   smbpasswd -x samba # åˆ é™¤ç”¨æˆ· samba çš„å¯†ç 
   userdel samba # åˆ é™¤ç”¨æˆ·
   
   # ç›¸å…³å‘½ä»¤
   service samba4 start # å¯åŠ¨æœåŠ¡
   service samba4 stop # åœæ­¢æœåŠ¡
   service samba4 restart # é‡å¯æœåŠ¡
   service samba4 status # æœåŠ¡çŠ¶æ€
   testparm -v # é…ç½®æ–‡ä»¶æ£€æŸ¥
   ```

3. è®¾ç½®å…±äº«

   åœ¨`æœåŠ¡`->`ç½‘ç»œå…±äº«`çš„`å¸¸è§„è®¾ç½®`ä¸‹ï¼Œ**æ¥å£**é€‰æ‹©`lan`ï¼›**å…è®¸æ—§åè®®**å¯ä»¥é€‰æ‹©æ€§å‹¾é€‰ï¼Œé»˜è®¤ä¸ç”¨ã€‚  
   åœ¨`å…±äº«ç›®å½•`ä¸‹éœ€è¦è®¾ç½®çš„é€‰é¡¹ï¼š

   |åç§°|è·¯å¾„|å¯æµè§ˆ|å…è®¸ç”¨æˆ·|åˆ›å»ºæƒé™æ©ç |ç›®å½•æƒé™æ©ç |
   |--|--|--|--|--|--|
   |music|/opt/navidrome/music|âœ”|samba|0666|0777|

   `ä¿å­˜å¹¶åº”ç”¨`ï¼Œç„¶åç”¨å‘½ä»¤é‡å¯ Samba æœåŠ¡ã€‚

   **æ³¨æ„**ï¼šå½“ä½¿ç”¨ ios æˆ– macos è¿›è¡Œ samba äº¤äº’æ—¶ï¼Œä¼šå¯¼è‡´ä¸Šä¼ ä½¿ç”¨ï¼Œæ­¤æ—¶éœ€è¦å‹¾é€‰`å¯ç”¨ macOS å…¼å®¹å…±äº«`å°±èƒ½æ­£å¸¸ä¸Šä¼ äº†ï¼Œä½†åˆä¼šå¼•å‘å…¶ä»–å¯èƒ½çš„é—®é¢˜ï¼Œå¦‚åœ¨å¿«æ·æŒ‡ä»¤ä¸­åˆ—å‡º samba æœåŠ¡ä¸Šçš„ç›®å½•ï¼Œå°±æ— æ•°æ®è¿”å›ï¼Œå¯¹æ­¤ï¼Œæˆ‘çš„è§£å†³æ–¹æ³•æ˜¯ç”¨ä¸‹é¢ Alist æä¾›çš„æ¥å£è¯·æ±‚å³å¯ã€‚

:::
::::

:::: card title="Windows" icon="simple-icons:windows"

æ‰“å¼€`æ§åˆ¶é¢æ¿`ï¼Œåœ¨`ç¨‹åºå’ŒåŠŸèƒ½`->`å¯ç”¨æˆ–å…³é—­ Windows åŠŸèƒ½`ä¸­ï¼Œå‹¾é€‰`SMB 1.0/CIFS æ–‡ä»¶å…±äº«æ”¯æŒ`å’Œ`SMB ç›´é€š`ã€‚  
å¯ç”¨å®Œæˆåï¼ŒæŒ‰`Win+E`æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨ï¼Œåœ¨åœ°å€æ è¾“å…¥`\\192.168.0.1`åŒå‡»`music`ç›®å½•åè¾“å…¥å‰é¢åˆ›å»ºçš„è´¦æˆ·/å¯†ç å³å¯ã€‚

::::

å¦‚æ­¤ä¸€æ¥ï¼Œå°±å¯èƒ½å¾ˆæ–¹ä¾¿çš„ä¸Šä¼ éŸ³ä¹äº†ï¼Œæ­é…å†…ç½‘ç©¿é€ï¼Œå¯ä»¥éšæ—¶éšåœ°çš„æ“ä½œã€‚

### 2.4 AList

å¯ä»¥ä½¿ç”¨ AList å°† smb è½¬æ¥ä¸º webdav æœåŠ¡ï¼Œè¿™æ˜¯æœ€ç®€å•ã€æ–¹ä¾¿ä¸”åŠŸèƒ½å¼ºå¤§çš„æ–¹å¼ã€‚åœ¨è½¯ä»¶åŒ…ä¸‹æœç´¢`luci-i18n-alist-zh-cn`å®‰è£…å³å¯ã€‚ä¹‹åçš„ä½¿ç”¨æ–¹å¼è¿™é‡Œä¸å¤šè¯´ï¼Œå‚è€ƒ[æ–‡æ¡£](https://alistgo.com/zh/guide/)å³å¯ã€‚  
å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒAList å®Œå…¨å¯ä»¥ç”¨è¿‡ api çš„æ–¹å¼æ¥æ“ä½œï¼Œé€šè¿‡ http çš„æ–¹å¼æ¥è¯·æ±‚ï¼Œä½†é»˜è®¤æƒ…å†µä¸‹`guest`ç”¨æˆ·æ˜¯ç¦ç”¨çš„ï¼Œè¿™å°±å¯¼è‡´æˆ‘ä»¬æ‰€æœ‰çš„ api æ“ä½œéƒ½éœ€è¦é‰´æƒã€‚æœ‰çš„æ—¶å€™ä»…ä»…æ˜¯æŸ¥çœ‹ç›®å½•ï¼Œæ­¤æ—¶å¯ä»¥å°†`guest`ç”¨æˆ·å¯ç”¨å³å¯ï¼Œå³ä½¿ä¸ç»™äºä»»ä½•æƒé™ï¼Œä¹Ÿæ˜¯å¯ä»¥æŸ¥çœ‹çš„ã€‚

### 2.5 SVN

æœ‰æ—¶å€™éœ€è¦ä¸€ä¸ªæ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå³æ–¹ä¾¿åœ¨å¤šå°ä¸»æœºä¸Šç®¡ç†æ–‡ä»¶ï¼Œä¹Ÿæ–¹ä¾¿æ–‡ä»¶å›æº¯ã€‚Git åè®®çš„æœåŠ¡å¯¹äº R2S æ¥è¯´å¯èƒ½æ¯”è¾ƒå èµ„æºï¼Œä¸è¿‡ SVN æ˜¯éå¸¸è½»é‡çš„ã€‚  
åœ¨`ç³»ç»Ÿ`->`è½¯ä»¶åŒ…`ä¸­æœç´¢`subversion`ï¼Œå¯ä»¥çœ‹åˆ°ä¸‰ä¸ªåŒ…ï¼š`subversion-client`ã€`subversion-libs`ã€`subversion-server`ã€‚å…¶ä¸­ libs åŒ…æ˜¯å…¶ä»–ä¸¤ä¸ªçš„ä¾èµ–åŒ…ï¼Œå¦‚æœåªæ˜¯ä½œä¸ºæœåŠ¡ç«¯ä½¿ç”¨ï¼Œå®‰è£…`subversion-server`å³å¯ï¼Œä¼šè‡ªåŠ¨å®‰è£…`subversion-libs`ä¾èµ–åŒ…ã€‚å®‰è£…å®Œæˆåå®‰è£…å¦‚ä¸‹æ­¥éª¤æ¥åˆå§‹åŒ–ï¼š

:::: steps

1. åˆ›å»º SVN ä»“åº“

   ```bash :no-line-numbers
   mkdir -p /srv/svn
   cd /srv/svn
   # åˆ›å»ºä¸€ä¸ªåä¸º repos çš„ä»“åº“
   svnadmin create repos
   ```

   æ‰§è¡Œå®Œåï¼Œç›®å½•ç»“æ„ç±»ä¼¼ï¼š

   ::: file-tree icon="colored"
   - repos
     - conf # é…ç½®æ–‡ä»¶(å¦‚ passwdã€authz)
       - authz # ç”¨æˆ·æƒé™
       - passwd # è´¦å·å¯†ç 
       - svnserve.conf # æœåŠ¡å™¨é…ç½®
     - db/ # ç‰ˆæœ¬å†å²ã€æ–‡ä»¶å†…å®¹ã€å…ƒæ•°æ®éƒ½åœ¨è¿™é‡Œï¼
     - format/
     - hooks/ # é’©å­è„šæœ¬(å¦‚ post-commit)
     - locks/ # é”æ–‡ä»¶
     - README.txt
   :::

2. é…ç½® SVN ç”¨æˆ·å’Œæƒé™

   ä¿®æ”¹`repos/conf/svnserve.conf`å¯ç”¨èº«ä»½éªŒè¯ï¼š

   ```ini title="svnserve.conf" :no-line-numbers
   [general]
   anon-access = none
   auth-access = write
   password-db = passwd
   authz-db = authz
   realm = R2S Repos
   ```

   ä¿®æ”¹`repos/conf/passwd`ï¼Œæ·»åŠ ç”¨æˆ·åå¯†ç ï¼š

   ```ini title="passwd" :no-line-numbers
   [users]
   admin = admin
   b560m = 123456
   winmi = 123456
   ```

   ä¿®æ”¹`repos/conf/authz`ï¼Œé…ç½®æƒé™ï¼š

   ```ini title="authz" :no-line-numbers
   [groups]
   # å®šä¹‰äº†ä¸¤ä¸ªç»„(åç§°éšæ„)ï¼Œä¸ºç»„èµ‹äºˆäº†æˆå‘˜
   admin = admin
   dev = b560m,winmi

   [/]
   # * è¡¨ç¤ºåŒ¿åï¼Œ* = r è¡¨ç¤ºåŒ¿åå¯ä»¥è¯»(r)åˆ° / ä¸‹çš„ä»“åº“
   # å¦‚æœä¸æƒ³åŒ¿åçœ‹åˆ°æ‰€æœ‰å°± * =  ï¼Œä¸ç»™ä»»ä½•æƒé™
   * = r
   @admin = rw

   # å› ä¸ºä»“åº“ä¸º reposï¼Œæ‰€ä»¥ä¸€å®šè¦æ˜¯ repos:<å­è·¯å¾„>
   [repos:/sub-store]
   @dev = rw

   [repos:/proxy-server]
   @dev = rw

   [repos:/assist-tool]
   @dev = rw
   ```

   é€šè¿‡è¿™ç§é…ç½®ï¼Œå¯ä»¥åœ¨å¯åŠ¨ä¸€ä¸ª svn æœåŠ¡çš„æƒ…å†µä¸‹ï¼Œç®¡ç†å¤šä¸ªå­ç›®å½•ï¼Œæ¯ä¸ªå­ç›®å½•å³è¡¨ç¤ºä¸€ä¸ªä»£ç åº“ã€‚

3. é‡å¯ SVN æœåŠ¡

   ä¿®æ”¹`/etc/config/subversion`çš„å†…å®¹ï¼š

   ```ini title="subversion" :no-line-numbers
   config subversion
        option path     '/srv/svn'
        option port     '3690'
   ```

   æ³¨æ„ï¼ŒæœåŠ¡å¯åŠ¨çš„è·¯å¾„åœ¨`/srv/svn`ï¼Œå®é™…åˆ›å»ºçš„ä»“åº“åº”è¯¥åœ¨å…¶å­ç›®å½•ä¸‹ï¼Œç„¶åé‡å¯ SVN æœåŠ¡`service subversion restart`ã€‚

4. å®¢æˆ·ç«¯è¿æ¥

   æ³¨æ„ï¼Œç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šçš„ä»“åº“ä¸‹åˆ›å»ºå­ç›®å½•æ˜¯æ— æ•ˆçš„ï¼Œé‚£ä¸ä¼šè¢« svn ç®¡ç†ï¼Œæ­£ç¡®çš„åšæ³•æ˜¯ç”±ç®¡ç†å‘˜å…ˆæ‹‰å–æ•´ä¸ªä»“åº“åˆ°æœ¬åœ°ï¼Œç„¶ååœ¨æœ¬åœ°åˆ›å»ºå¥½ç›®å½•ç»“æ„ï¼š

   ::: file-tree icon="colored"
   - svn-repos
     - assist-tool
       - trunk/ # ä¸»å¹²
       - braches/ # åˆ†æ”¯
       - tags/ # ç‰ˆæœ¬å¿«ç…§
     - proxy-server/
       - trunk/ # ä¸»å¹²
       - braches/ # åˆ†æ”¯
       - tags/ # ç‰ˆæœ¬å¿«ç…§
     - sub-store/
         - trunk/ # ä¸»å¹²
         - braches/ # åˆ†æ”¯
         - tags/ # ç‰ˆæœ¬å¿«ç…§
   :::

   ```bash :no-line-numbers
   # ç®¡ç†å‘˜æ‹‰å–æ•´ä¸ªä»“åº“
   svn checkout svn://192.168.0.1/repos --username admin -- password admin
   # å¼€å‘è€…æ‹‰å–å­ç›®å½•
   svn checkout svn://192.168.0.1/repos/sub-store --username winmi -- password 123456
   ```

   ä¹‹åå¯ä»¥`add/commit/update/log`ç­‰å¸¸è§„æ“ä½œäº†ã€‚

**æ³¨æ„**ï¼šä¸Šä¼ åˆ° SVN çš„æ–‡ä»¶éƒ½åœ¨`db`ç›®å½•ä¸­ï¼Œä½†ä¸æ˜¯åŸæ ·å­˜å‚¨ï¼Œè€Œæ˜¯è¢«å‹ç¼©ã€ç¼–ç ã€åˆ†å—æˆæ•°æ®åº“å½¢å¼ã€‚å¦‚ä½ æƒ³å¯¼å‡ºå®Œæ•´ç‰ˆæœ¬åº“çš„å†…å®¹ä¸ºä¸€ä¸ªæ™®é€šæ–‡ä»¶å¤¹ï¼Œå¯ä»¥ç”¨ï¼š

```bash :no-line-numbers
svn export svn://192.168.0.1/repos
# æˆ–è€…ä½¿ç”¨ dumpï¼Œå¯ä»¥å¯¼å‡ºæ•´ä¸ªä»“åº“ï¼ŒåŒ…å«æäº¤è®°å½•ã€‚ç”¨äºå´©æºƒæ¢å¤æˆ–æœåŠ¡å™¨è¿ç§»
svnadmin dump /srv/svn/repos > ~/svn-repos.dump
# ç„¶ååœ¨æ¢å¤çš„æœåŠ¡å™¨ä¸Šåˆ›å»ºä»“åº“
svnadmin create repos
# æ¥ç€æ¢å¤ dump
svnadmin load /srv/svn/repos < ~/svn-repos.dump
```

SVN ä¸ Git ä¸åŒç‚¹ï¼š

- svn ä¸åƒ git é‚£æ ·é€šè¿‡ä¸€ä¸ª`.gitignore`æ–‡ä»¶å°±å¯ä»¥å¿½ç•¥å¤šä¸ªã€å¤šçº§çš„æ–‡ä»¶/ç›®å½•ï¼Œsvn åªèƒ½æ‰‹åŠ¨è®¾ç½®å¿½ç•¥å•ä¸ªæ–‡ä»¶/ç›®å½•ï¼Œæ¯æ¬¡å¿½ç•¥å…¶å®æ˜¯è®¾ç½®ç›®å½•çš„å±æ€§ï¼Œå› æ­¤è®¾ç½®å¿½ç•¥çš„æ“ä½œä¹Ÿæ˜¯è¦æäº¤çš„ã€‚
- svn ä¸åƒ git åœ¨æœ¬åœ°åˆ é™¤äº†è·Ÿè¸ªçš„æ–‡ä»¶åæäº¤å³å¯åŒæ­¥åˆ é™¤è¿œç¨‹æ–‡ä»¶ï¼Œsvn å¿…é¡»è¦ä½¿ç”¨`svn delete`å‘½ä»¤åˆ é™¤æ–‡ä»¶ç„¶åæäº¤æ‰å¯ä»¥ã€‚

å½“ä½¿ç”¨ svn ç®¡ç†æ—¶ï¼Œåˆ é™¤äº†å¤šä¸ªæ–‡ä»¶å¦‚ä½•æ‰¹é‡æäº¤å‘¢ï¼Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼š

**æ–¹æ³•ä¸€**ï¼šä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š

```bash
svn status | grep '^!' | sed 's/^! *//' | while IFS= read -r file; do svn delete "$file"; done
svn commit -m "æ‰¹é‡åˆ é™¤è¢«æœ¬åœ°æ‰‹åŠ¨åˆ é™¤çš„æ–‡ä»¶"
```

**æ–¹æ³•äºŒ**ï¼šåˆ›å»ºè„šæœ¬`sync-svn-delete.sh`ä»¥åŠ VSCode çš„ task æ–‡ä»¶`.vscode/tasks.json`å®ç°ç‚¹å‡»è¿è¡Œã€‚

```bash title="sync-svn-delete.sh" :no-line-numbers
#!/bin/bash
# è‡ªåŠ¨åŒæ­¥æœ¬åœ°è¢«æ‰‹åŠ¨åˆ é™¤çš„æ–‡ä»¶åˆ° SVN ä»“åº“

cd trunk

echo "ğŸ“ æ­£åœ¨æ‰«ææœ¬åœ°è¢«åˆ é™¤çš„æ–‡ä»¶..."

deleted_files=$(svn status | grep '^!' | sed 's/^! *//')

if [ -z "$deleted_files" ]; then
    echo "âœ… æ²¡æœ‰æ£€æµ‹åˆ°éœ€è¦åŒæ­¥åˆ é™¤çš„æ–‡ä»¶ã€‚"
    exit 0
fi

echo "$deleted_files" | while IFS= read -r file; do
    echo "â– åˆ é™¤ï¼š$file"
    svn delete "$file"
done

echo "ğŸš€ æäº¤åˆ° SVN..."
svn commit -m "åŒæ­¥åˆ é™¤æœ¬åœ°æ‰‹åŠ¨åˆ é™¤çš„æ–‡ä»¶"
```

```json title="tasjs.json" :no-line-numbers
{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "åŒæ­¥ SVN åˆ é™¤æ–‡ä»¶",
            "type": "shell",
            "command": "${workspaceFolder}/.vscode/sync-svn-delete.sh",
            "problemMatcher": [],
            "options": {
                "shell": {
                    "executable": "C:\\Program Files\\Git\\bin\\bash.exe"
                }
            },
            "presentation": {
                "reveal": "always"
            },
            "group": {
                "kind": "build",
                "isDefault": true
            }
        }
    ]
}
```

::::

å½“ä½¿ç”¨å›¾å½¢åŒ–å®¢æˆ·ç«¯ï¼Œæ¯”å¦‚ TortoiseSVN æ£€å‡ºæ—¶ï¼Œé»˜è®¤ä¼šç¼“å­˜é¦–æ¬¡è¾“å…¥çš„ç”¨æˆ·å’Œå¯†ç ï¼Œå¦‚æœæƒ³è¦åˆ‡æ¢ç”¨æˆ·åˆ™éœ€è¦åˆ é™¤`C:\Users\<ç”¨æˆ·å>\AppData\Roaming\Subversion\auth`(Windows)æˆ–`~/.subversion/auth`(Linux/MacOS)ï¼Œåœ¨ä¸‹æ¬¡æ“ä½œ SVN æ—¶å°±ä¼šè¦æ±‚è¾“å…¥ç”¨æˆ·/å¯†ç ã€‚

å¦‚æœæ˜¯ç”¨å‘½ä»¤è¡Œæ“ä½œå¯ä»¥ï¼š

```bash :no-line-numbers
svn checkout svn://192.168.0.1/repos --username admin --password admin --no-auth-cache --non-interactive --quiet
```

`-no-auth-cache`è¡¨ç¤ºä¸ç¼“å­˜å¯†ç ï¼Œ`--non-interactive`é¿å…äº¤äº’å¼è¾“å…¥å¯†ç ï¼Œé€‚åˆè„šæœ¬ï¼Œ`--quiet`è¡¨ç¤ºé™é»˜çš„ä¸è¾“å‡ºè¯¦æƒ…ã€‚

ä¸ºäº†ç»´æŠ¤ä»“åº“ä»£ç çš„å®‰å…¨ï¼Œåº”è¯¥æœ‰å®šæ—¶ä»»åŠ¡æ¯å¤©è‡ªåŠ¨å¯¼å‡ºæ•´ä¸ªä»“åº“ä»£ç ï¼Œè„šæœ¬å¦‚ä¸‹ï¼š

::: details ç‚¹å‡»æŸ¥çœ‹ä»£ç 

```py
# -*- coding: utf-8 -*-
import sys
from pathlib import Path
import shutil
import subprocess
from datetime import datetime
import os
import re
import zipfile

TMP = '/tmp/svn-bak' # ä¸´æ—¶æ–‡ä»¶ç›®å½•
BAK = '/srv/share/ä»£ç åº“/svn' # å¤‡ä»½æ–‡ä»¶ç›®å½•
LIMIT = 5  # æœ€å¤§å¤‡ä»½æ•°é‡

def init():
    # åˆ é™¤ä¸´æ—¶ç›®å½•(é¿å… checkout å¤±è´¥)
    if Path(TMP).exists():
        shutil.rmtree(TMP)

    # åˆ›å»ºç›®å½•ï¼ŒåŒ…æ‹¬ä¸­é—´ç›®å½•
    Path(TMP).mkdir(parents=True, exist_ok=True)
    Path(BAK).mkdir(parents=True, exist_ok=True)


def zip(source_dir, zip_path):
    source_dir = os.path.abspath(source_dir)  # ç¡®ä¿æ˜¯ç»å¯¹è·¯å¾„
    with zipfile.ZipFile(zip_path, 'w', zipfile.ZIP_DEFLATED) as zipf:
        for root, _, files in os.walk(source_dir):
            for file in files:
                abs_file_path = os.path.join(root, file)
                rel_path = os.path.relpath(abs_file_path, os.path.dirname(source_dir))
                zipf.write(abs_file_path, arcname=rel_path)

def main():
    print(f"æ—¶é—´ï¼š{datetime.now().strftime('%Y-%m-%d %H:%M:%S')}|svn repos ä»“åº“å¤‡ä»½", file=sys.stderr)
    cmd = [
        "svn", "export", "svn://127.0.0.1/repos", f"{TMP}/repos",
        "--username", "admin",
        "--password", "admin",
        "--non-interactive",
        "--no-auth-cache",
        "--quiet"
    ]
    result = subprocess.run(cmd,capture_output=True,text=True)
    if result.returncode != 0:
        print('checkout failed: ' + result.stderr, file=sys.stderr)
        sys.exit(-1)
    # å‹ç¼©å¤‡ä»½
    zip(f"{TMP}/repos",f"{BAK}/reposbak-{datetime.now().strftime('%Y%m%d%H%M%S')}.zip")
    pattern = re.compile(r"reposbak-\d{14}\.zip")
    files = [f for f in os.listdir(BAK) if pattern.fullmatch(f)]
    # å¦‚æœå‹ç¼©åŒ…æ•°é‡è¶…è¿‡é™åˆ¶
    if len(files) > LIMIT:
        # ä¿ç•™æœ€è¿‘çš„æ—¶é—´
        files.sort(reverse=True)
        # å…¶ä½™å…¨éƒ¨åˆ é™¤
        for f in files[LIMIT:]:
            os.remove(os.path.join(BAK, f))
    # åˆ æ‰ä¸´æ—¶ç›®å½•(å› ä¸ºä¸éœ€è¦äº†)
    shutil.rmtree(TMP)

# 0 2 * * * /usr/bin/python /usr/local/bin/svnrepo-backup.py >> /var/log/svnrepo-backup.log 2>&1
if __name__ == '__main__':
    init()
    main()
```

:::

---

::: note æœ¬æ–‡å‚è€ƒ

- [å®‰è£…Samba](https://doc.embedfire.com/openwrt/user_manal/zh/latest/User_Manual/openwrt/samba.html#samba)
- [è®¾ç½®OpenWRTçš„sambaå…±äº«](https://skyao.io/learning-openwrt/docs/share/samba/)
- [OpenWrtå±€åŸŸç½‘æ–‡ä»¶å…±äº«è½¯ä»¶ä¹‹samba4](https://iyzm.net/openwrt/105.html)

:::
